{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { BIconTypeUnderline, BIconTypeStrikethrough, BIconInfo, BIconCircleFill } from 'bootstrap-vue';\nimport axios from 'axios';\nimport _ from 'underscore';\nexport default {\n  name: 'RaceView',\n  components: {\n    BIconTypeUnderline,\n    BIconTypeStrikethrough,\n    BIconInfo,\n    BIconCircleFill\n  },\n  props: ['race'],\n  data() {\n    return {\n      transProps: {\n        name: 'flip-list'\n      },\n      horseFields: [{\n        key: \"scratchButton\",\n        label: \"\"\n      }, {\n        key: \"programNumber\",\n        label: \"#\"\n      }, {\n        key: \"mlodds\",\n        \"label\": \"ML\",\n        sortable: true\n      }, {\n        key: \"name\"\n      }, {\n        key: \"daysSinceLastRace\",\n        label: \"l/r\",\n        tdClass: this.highlightDaysSince\n      }, {\n        key: \"furlongDays\",\n        label: \"FD\",\n        formatter: this.format2Places,\n        sortable: true\n      }, {\n        key: \"style\",\n        label: \"Style\",\n        tdClass: this.highlightPaceAdvantage\n      }, {\n        key: \"classRating\",\n        label: \"Class\",\n        formatter: this.format2Places,\n        sortable: true,\n        tdClass: this.highlightMax\n      }, {\n        key: \"averageCompetitiveLevel\",\n        label: \"ACL\",\n        formatter: this.format2Places,\n        sortable: true,\n        tdClass: this.highlightMax\n      }, {\n        key: \"speedRating\",\n        label: \"Speed\",\n        formatter: this.format2Places,\n        sortable: true,\n        tdClass: this.highlightMax\n      }, {\n        key: \"arating\",\n        label: \"AR\",\n        formatter: this.format2Places,\n        sortable: true,\n        tdClass: this.highlightMax\n      }, {\n        key: \"aratingClass\",\n        label: \"AR Cl\",\n        formatter: this.format2Places,\n        sortable: true,\n        tdClass: this.highlightMax\n      }, {\n        key: \"aratingForm\",\n        label: \"AR F\",\n        formatter: this.format2Places,\n        sortable: true,\n        tdClass: this.highlightMax\n      }, {\n        key: \"aratingConnections\",\n        label: \"AR Co\",\n        formatter: this.format2Places,\n        sortable: true,\n        tdClass: this.highlightMax\n      }, {\n        key: \"e1Avg\",\n        label: \"E1\",\n        formatter: this.formatInt,\n        sortable: true,\n        tdClass: this.highlightMax\n      }, {\n        key: \"e2Avg\",\n        label: \"E2\",\n        formatter: this.formatInt,\n        sortable: true,\n        tdClass: this.highlightMax\n      }, {\n        key: \"turnTime\",\n        label: \"TT\",\n        formatter: this.formatInt,\n        sortable: true,\n        tdClass: this.highlightMax\n      }, {\n        key: \"latePaceAvg\",\n        label: \"Late\",\n        formatter: this.formatInt,\n        sortable: true,\n        tdClass: this.highlightMax\n      }, {\n        key: \"combinedPaceAvg\",\n        label: \"Comb\",\n        formatter: this.format2Places,\n        sortable: true,\n        tdClass: this.highlightMax\n      }, {\n        key: \"classShift\",\n        label: \"cSh\",\n        formatter: this.format2Places,\n        sortable: true,\n        tdClass: this.highlightShift\n      }, {\n        key: \"purseShift\",\n        label: \"pSh\",\n        formatter: this.formatInt,\n        sortable: true,\n        tdClass: this.highlightShift\n      }, {\n        key: \"detailsButton\",\n        label: \"\"\n      }, {\n        key: \"_showDetails\",\n        thClass: 'd-none',\n        tdClass: 'd-none'\n      }],\n      ppFields: [{\n        key: \"raceDateString\",\n        label: \"DATE\",\n        tdClass: this.highlightDaysSincePP\n      }, {\n        key: \"daysSinceLastRace\",\n        label: \"LR\"\n      }, {\n        key: \"trackCode\",\n        label: \"TRK\"\n      }, {\n        key: \"surface\",\n        label: \"\",\n        tdClass: this.highlightSimilarSurfDist\n      }, {\n        key: \"dist\",\n        lable: \"DIST\",\n        tdClass: this.highlightSimilarSurfDist\n      }, {\n        key: \"trackCondition\",\n        label: \"\",\n        tdClass: this.highlightSimilarSurfDist\n      }, {\n        key: \"fraction1\",\n        label: \"\"\n      }, {\n        key: \"fraction2\",\n        label: \"\"\n      }, {\n        key: \"fraction3\",\n        label: \"\"\n      }, {\n        key: \"finalTime\",\n        label: \"\"\n      }, {\n        key: \"raceStrength\",\n        label: \"RS\",\n        formatter: this.format2Places\n      }, {\n        key: \"raceClassification\",\n        label: \"RACETYPE\"\n      }, {\n        key: \"purse\",\n        tdClass: this.highlightPurseShift\n      }, {\n        key: \"e1\"\n      }, {\n        key: \"e2\",\n        label: \"E2/\"\n      }, {\n        key: \"paceFigureLate\",\n        label: \"LP\"\n      }, {\n        key: \"raceShapeFirstCall\",\n        label: \"1c\"\n      }, {\n        key: \"raceShapeSecondCall\",\n        label: \"2c\"\n      }, {\n        key: \"brisspeedRating\",\n        label: \"SPD\",\n        class: \"strong\",\n        tdClass: this.highlightSpeedInRange\n      }, {\n        key: \"postPosition\",\n        label: \"PP\"\n      }, {\n        key: \"startCallPosition\",\n        label: \"ST\"\n      }, {\n        key: \"firstCallPosition\",\n        label: \"1C\"\n      }, {\n        key: \"secondCallPosition\",\n        label: \"2C\"\n      }, {\n        key: \"stretchPosition\",\n        label: \"STR\"\n      }, {\n        key: \"finishPosition\",\n        label: \"FIN\",\n        tdClass: this.highlightFinish\n      }, {\n        key: \"jockey\",\n        label: \"JOCKEY\"\n      }, {\n        key: \"medication\",\n        label: \"\"\n      }, {\n        key: \"odds\",\n        label: \"ODDS\",\n        tdClass: this.highlightBeatenFavorite\n      }, {\n        key: \"finishers\",\n        label: \"Top Finishers\"\n      }, {\n        key: \"tripComment\",\n        label: \"Comment\"\n      }, {\n        key: \"numberOfEntrants\",\n        label: \"\"\n      }],\n      trackConditions: [{\n        value: \"ft\",\n        text: \"Fast\"\n      }, {\n        value: \"my\",\n        text: \"Muddy\"\n      }, {\n        value: \"wf\",\n        text: \"Wet Fast\"\n      }, {\n        value: \"yl\",\n        text: \"Yielding\"\n      }, {\n        value: \"hy\",\n        text: \"Heavy\"\n      }, {\n        value: \"gd\",\n        text: \"Good\"\n      }, {\n        value: \"sy\",\n        text: \"Sloppy\"\n      }, {\n        value: \"fm\",\n        text: \"Firm\"\n      }, {\n        value: \"sf\",\n        text: \"Soft\"\n      }, {\n        value: \"sl\",\n        text: \"Slow\"\n      }]\n    };\n  },\n  methods: {\n    async toggleScratch(item) {\n      try {\n        var race = _.find(this.races, function (r) {\n          return r.raceNumber == item.raceNumber;\n        });\n        await axios({\n          url: 'toggleScratch/' + race.raceNumber + '/' + item.programNumber,\n          method: 'GET',\n          baseURL: 'http://localhost:8080/jpp/rest/remote/'\n        });\n        item.scratchedFlag = !item.scratchedFlag;\n      } catch (err) {\n        console.log(err.response);\n      }\n    },\n    async toggleIgnored(item) {\n      try {\n        var race = _.find(this.races, function (r) {\n          return r.raceNumber == item.raceNumber;\n        });\n        await axios({\n          url: 'toggleIgnored/' + race.raceNumber + '/' + item.programNumber + '/' + item.raceDate[0] + '/' + item.raceDate[1] + '/' + item.raceDate[2],\n          method: 'GET',\n          baseURL: 'http://localhost:8080/jpp/rest/remote/'\n        });\n        item.ignoredFlag = !item.ignoredFlag;\n        console.log(item);\n      } catch (err) {\n        console.log(err.response);\n      }\n    },\n    async updateCondition(race) {\n      try {\n        const response = await axios({\n          url: 'setTrackCondition/' + race.raceNumber + '/' + race.trackCondition,\n          method: 'GET',\n          baseURL: 'http://localhost:8080/jpp/rest/remote/'\n        });\n        this.races = response.data;\n      } catch (err) {\n        console.log(err.response);\n      }\n    },\n    async toggleOffTheTurf(race) {\n      try {\n        const response = await axios({\n          url: 'toggleOffTheTurf/' + race.raceNumber,\n          method: 'GET',\n          baseURL: 'http://localhost:8080/jpp/rest/remote/'\n        });\n        this.races = response.data;\n      } catch (err) {\n        console.log(err.response);\n      }\n    },\n    rowClass(item, type) {\n      if (!item || type !== 'row') return;\n      if (item.scratchedFlag) return 'table-dark scratched';\n      return 'notScratched';\n    },\n    ppRowClass(item, type) {\n      if (!item || type !== 'row') return;\n      var c = \"\";\n      if (item.over365Days) c += \"diff365\";\n      if (item.over90Days && !item.over365Days) c += \"diff90\";\n      if (item.ignoreFlag) c += \" ignored\";\n      return c;\n    },\n    toggleAll(race, b) {\n      _.each(race.horses, function (horse) {\n        horse._showDetails = b;\n      });\n    },\n    fractionString(decimal) {\n      switch (decimal) {\n        case 0.13:\n          return \"hd\";\n        case 0.25:\n          return \"&frac14;\";\n        case 0.5:\n          return \"&frac12;\";\n        case 0.75:\n          return \"&frac34;\";\n      }\n    },\n    shortenJockeyName(value) {\n      return value.split(\" \")[0] + value.split(\" \")[1].charAt(0);\n    },\n    format2Places(amount) {\n      const formatter = new Intl.NumberFormat('en-US', {\n        // These options are needed to round to whole numbers if that's what you want.\n        minimumFractionDigits: 2,\n        // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n        maximumFractionDigits: 2 // (causes 2500.99 to be printed as $2,501)\n      });\n\n      return formatter.format(amount);\n    },\n    formatInt(amount) {\n      const formatter = new Intl.NumberFormat('en-US', {\n        // These options are needed to round to whole numbers if that's what you want.\n        minimumFractionDigits: 0,\n        // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n        maximumFractionDigits: 0 // (causes 2500.99 to be printed as $2,501)\n      });\n\n      return formatter.format(amount);\n    },\n    formatCurrency(amount) {\n      const formatter = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD',\n        // These options are needed to round to whole numbers if that's what you want.\n        minimumFractionDigits: 0,\n        // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n        maximumFractionDigits: 0 // (causes 2500.99 to be printed as $2,501)\n      });\n\n      return formatter.format(amount);\n    },\n    str_pad_left(string, pad, length) {\n      return (new Array(length + 1).join(pad) + string).slice(-length);\n    },\n    highlightMax(value, key, item) {\n      var race = _.find(this.races, function (r) {\n        return r.raceNumber == item.raceNumber;\n      });\n      var values = _.pluck(_.reject(race.horses, function (h) {\n        return h.scratchedFlag;\n      }), key);\n      if (value == _.max(values)) {\n        return \"greenHighlight\";\n      }\n    },\n    highlightDaysSince(value) {\n      if (value > 180) return \"gt180\";\n      if (value > 90) return \"gt90\";\n      if (value > 45) return \"gt45\";\n    },\n    highlightDaysSincePP(value, key, item) {\n      if (item.daysSinceLastRace > 180) return \"gt180\";\n      if (item.daysSinceLastRace > 90) return \"gt90\";\n      if (item.daysSinceLastRace > 45) return \"gt45\";\n    },\n    highlightFinish(value, key, item) {\n      if (item.finishPosition == \"1\") return \"greenHighlight\";\n      if (item.finishPosition == \"2\" || item.finishPosition == \"3\") return \"lightGreenHighlight\";\n    },\n    highlightBeatenFavorite(value, key, item) {\n      if (item.favoriteFlag && item.finishPosition != \"1\") return \"yellowHighlight\";\n    },\n    highlightPurseShift(value, key, item) {\n      var race = _.find(this.races, function (r) {\n        return r.raceNumber == item.thisRaceNumber;\n      });\n      if (item.purse >= race.purse + 20000) return \"greenHighlight\";\n      if (item.purse > race.purse) return \"lightGreenHighlight\";\n      if (item.purse == race.purse) return \"\";\n      if (item.purse < race.purse - 10000) return \"yellowHighlight\";\n      if (item.purse < race.purse - 20000) return \"lightRedHighlight\";\n      if (item.purse < race.purse - 30000) return \"redHighlight\";\n    },\n    highlightSpeedInRange(value, key, item) {\n      var race = _.find(this.races, function (r) {\n        return r.raceNumber == item.thisRaceNumber;\n      });\n      if (item.brisspeedRating >= race.parSpeed) return \"greenHighlight\";\n      if (item.brisspeedRating >= race.parSpeed - 3) return \"lightGreenHighlight\";\n    },\n    highlightPaceAdvantage(value, key, item) {\n      var race = _.find(this.races, function (r) {\n        return r.raceNumber == item.raceNumber;\n      });\n      if (_.contains(_.pluck(race.advantagedHorses, \"programNumber\"), item.programNumber)) return \"greenHighlight\";\n    },\n    highlightShift(value) {\n      if (value < 0) return \"greenHighlight\";\n      if (value > 0) return \"yellowHighlight\";\n    },\n    highlightSimilarSurfDist(value, key, item) {\n      var race = _.find(this.races, function (r) {\n        return r.raceNumber == item.thisRaceNumber;\n      });\n      if (race.surface.indexOf(\"TURF\") > -1 && !race.offTheTurfFlag) {\n        if (item.surface.indexOf(\"TURF\") > -1 && (race.trackCondition == \"fm\" && item.trackCondition == \"fm\" || race.trackCondition != \"fm\" && [\"tf\", \"gd\", \"gf\", \"hd\", \"yl\", \"sf\", \"hy\", \"sl\"].indexOf(item.trackCondition) > -1) && (race.furlongs < 8 && item.furlongs < 8 || race.furlongs >= 8 && item.furlongs >= 8)) return \"blueHighlight\";\n      } else {\n        if ((item.surface.indexOf(\"TURF\") == -1 || item.offTheTurfFlag) && (race.trackCondition == \"ft\" && item.trackCondition == \"ft\" || race.trackCondition != \"ft\" && [\"gd\", \"hy\", \"my\", \"sl\", \"sy\", \"wf\"].indexOf(item.trackCondition) > -1) && (race.furlongs < 8 && item.furlongs < 8 || race.furlongs >= 8 && item.furlongs >= 8)) return \"blueHighlight\";\n      }\n    },\n    alsoInRace(nameToMatch, row) {\n      var race = _.find(this.races, function (r) {\n        return r.raceNumber == row.thisRaceNumber;\n      });\n      var names = _.pluck(race.horses, \"name\");\n      if (names.indexOf(nameToMatch) > -1 && nameToMatch != row.name) return \"alsoInRace\";\n    },\n    fastWorkout(workout) {\n      if (Math.floor(Math.abs(workout.timeOfWorkout) / workout.furlongs < 12)) return \"greenHighlight\";\n      if (Math.floor(Math.abs(workout.timeOfWorkout)) == 12 * workout.furlongs) return \"lightGreenHighlightBorder\";\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2gBA;AAEA;AACA;AAEA;EACAA;EACAC;IACAC;IAAAC;IAAAC;IAAAC;EACA;EACAC;EACAC;IACA;MACAC;QACAR;MACA;MACAS,cACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAA;QAAAE;MAAA,GACA;QAAAF;MAAA,GACA;QAAAA;QAAAC;QAAAE;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;MAAA,GACA;QAAAF;QAAAC;QAAAE;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAG;QAAAF;QAAAC;MAAA,GACA;QAAAH;QAAAC;MAAA,GACA;QAAAD;QAAAK;QAAAF;MAAA,EAEA;MACAG,WACA;QAAAN;QAAAC;QAAAE;MAAA,GACA;QAAAH;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;QAAAE;MAAA,GACA;QAAAH;QAAAO;QAAAJ;MAAA,GACA;QAAAH;QAAAC;QAAAE;MAAA,GACA;QAAAH;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;QAAAG;MAAA,GACA;QAAAJ;QAAAC;MAAA,GACA;QAAAD;QAAAG;MAAA,GACA;QAAAH;MAAA,GACA;QAAAA;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;QAAAO;QAAAL;MAAA,GACA;QAAAH;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;QAAAE;MAAA,GACA;QAAAH;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;QAAAE;MAAA,GACA;QAAAH;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAQ,kBACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA;IAEA;EACA;EACAC;IACA;MACA;QACA;UACA;QACA;QACA;UACAC;UACAC;UACAC;QACA;QACAC;MACA;QACAC;MAEA;IACA;IACA;MACA;QACA;UACA;QACA;QACA;UACAJ;UACAC;UACAC;QACA;QACAC;QACAC;MACA;QACAA;MAEA;IACA;IACA;MACA;QACA;UACAJ;UACAC;UACAC;QACA;QACA;MACA;QACAE;MAEA;IACA;IACA;MACA;QACA;UACAJ;UACAC;UACAC;QACA;QACA;MACA;QACAE;MAEA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MAEA;MACA;MAEA;MAEA;IACA;IACAC;MACAC;QACAC;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;UACA;QACA;UACA;QACA;UACA;MAAA;IAEA;IACAC;MACA;IACA;IACAC;MACA;QAGA;QACAC;QAAA;QACAC;MACA;;MACA;IACA;IACAC;MACA;QAGA;QACAF;QAAA;QACAC;MACA;;MACA;IACA;IACAE;MACA;QACAC;QACAC;QAEA;QACAL;QAAA;QACAC;MACA;;MACA;IACA;IACAK;MACA;IACA;IACAC;MACA;QACA;MACA;MAEA;QACA;MACA;MAEA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;MACA;MAEA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;QACA;MACA;MAEA;MACA;IACA;IACAC;MACA;QACA;MACA;MAEA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;QACA;MACA;MAEA;QACA,IACA1B,sCACA2B,qLACAA,qFACA;MACA;QACA,oEACAA,yKACAA,qFACA;MACA;IACA;IACAC;MACA;QACA;MACA;MACA;MACA;IAEA;IACAC;MACA;MACA;IACA;EACA;AAEA","names":["name","components","BIconTypeUnderline","BIconTypeStrikethrough","BIconInfo","BIconCircleFill","props","data","transProps","horseFields","key","label","sortable","tdClass","formatter","thClass","ppFields","lable","class","trackConditions","value","text","methods","url","method","baseURL","item","console","rowClass","ppRowClass","toggleAll","_","horse","fractionString","shortenJockeyName","format2Places","minimumFractionDigits","maximumFractionDigits","formatInt","formatCurrency","style","currency","str_pad_left","highlightMax","highlightDaysSince","highlightDaysSincePP","highlightFinish","highlightBeatenFavorite","highlightPurseShift","highlightSpeedInRange","highlightPaceAdvantage","highlightShift","highlightSimilarSurfDist","race","alsoInRace","fastWorkout"],"sourceRoot":"src/components","sources":["HorseView.vue"],"sourcesContent":["<template>\n    <div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">\n                <span>Race {{race.raceNumber}}</span>\n                <small v-b-toggle=\"'collapse-'+race.race_id\"> - <u>show/hide details</u></small>\n            </h5>\n            <b-collapse :id=\"'collapse-'+race.race_id\" visible>\n                <b-row>\n                    <b-col>\n                        ${{race.purse}} {{race.raceType}}\n                    </b-col>\n                    <b-col>\n                        {{race.surface}} {{race.furlongs}} Furlongs\n                    </b-col>\n                    <b-col cols=\"6\">\n                        {{race.ageRestriction}} {{race.ageRestrictionRange}} {{race.sexRestriction}}\n                    </b-col>\n                </b-row>\n                <b-row>\n                    <b-col cols=\"8\">\n                        Wagers: {{race.wagerTypes}}\n                    </b-col>\n                    <b-col>\n                        Post Times: {{race.postTimes}}\n                    </b-col>\n                </b-row>\n            </b-collapse>\n            <b-row>\n                <b-col>\n                    {{race.paceScenario}}\n                </b-col>\n                <b-col cols=\"3\">\n                    Pars: {{race.furlongs &lt; 8 ? race.parPace2F : race.parPace4F}} {{race.furlongs &lt; 8 ? race.parPace4F : race.parPace6F}} / {{race.parLatePace}} - {{race.parSpeed}} \n                </b-col>\n                <b-col>\n                    MaxSpeed: {{race.maxSpeedRating}}\n                </b-col>\n                <b-col>\n                    E1Avg: {{race.e1Avg}}\n                </b-col>\n                <b-col>\n                    E2Avg: {{race.e2Avg}}\n                </b-col>\n                <b-col>\n                    MaxE2: {{race.maxE2}}\n                </b-col>\n                <b-col>\n                    LatePaceBestL3: {{race.latePaceBestLast3}}\n                </b-col>\n            </b-row>\n        </div>\n\n        <b-navbar id=\"nav\" class=\"py-2\" variant=\"success\">\n            \n            <!-- Right aligned nav items -->\n            <b-navbar-nav>\n                <b-nav-form>\n                    <b-form-select v-model=\"race.trackCondition\" :options=\"trackConditions\" @change=\"updateCondition(race)\"></b-form-select>\t\t\n                    <b-form-checkbox switch class=\"m-2\" v-if=\"race.surface.indexOf('TURF') > -1\" v-model=\"race.offTheTurfFlag\" @change=\"toggleOffTheTurf(race)\">Off</b-form-checkbox>\n                </b-nav-form>\n            </b-navbar-nav>\n            <b-navbar-nav class=\"ml-auto\" small>\n                <b-nav-item @click=\"toggleAll(race, true)\">+</b-nav-item>\n                <b-nav-item @click=\"toggleAll(race, false)\">-</b-nav-item>\n            </b-navbar-nav>\n        </b-navbar>\t\t\n\n        <b-table\n            id=\"pps\"\n            :items=\"race.horses\"\n            :fields=\"horseFields\"\n            small\n            sort-icon-left\n            :tbody-tr-class=\"rowClass\"\n            primary-key=\"programNumber\"\n            :tbody-transition-props=\"transProps\"\n        >\n            <template #cell(style)=\"data\">\n                {{ data.item.runStyle }} {{ data.item.speedPoints }}\n            </template>\t\n            <template #cell(scratchButton)=\"row\">\t\n                <span v-if=\"!row.item.scratchedFlag\">\t\t\t\n                    <b-button\n                        @click=\"toggleScratch(row.item)\"\n                        size=\"sm\"\n                        variant=\"warning\"\n                        class=\"mr-1\"\n                        title=\"S\">\n                        <b-icon-type-strikethrough\n                            aria-hidden=\"true\">\n                        ></b-icon-type-strikethrough>\n                    </b-button>\n                </span>\n                <span v-if=\"row.item.scratchedFlag\">\t\t\t\n                    <b-button\n                        @click=\"toggleScratch(row.item)\"\n                        size=\"sm\"\n                        variant=\"primary\"\n                        class=\"mr-1\"\n                        title=\"S\">\n                        <b-icon-type-underline\n                            aria-hidden=\"true\">\n                        ></b-icon-type-underline>\n                    </b-button>\n                </span>\t\n            </template>\t\n            <template #cell(detailsButton)=\"row\">\t\t\t\t\n                <b-button\n                    @click=\"row.toggleDetails\"\n                    size=\"sm\"\n                    variant=\"outline-primary\"\n                    class=\"mr-1\"\n                    title=\"S\">\n                    <b-icon-info\n                        aria-hidden=\"true\">\n                    ></b-icon-info>\n                </b-button>\n            </template>\t\n            <template #row-details=\"row\">\n                <b-container fluid class=\"pp border\">\n                    <b-row>\n                        <b-col cols=\"4\">\n                            <b-row>\n                                <b-col cols=\"1\">\n                                    <span class=\"h5\"><strong>{{row.item.programNumber}}</strong>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                    </span><br>\n                                    <span class=\"h6\">{{row.item.mlodds}}</span><br>\n                                </b-col>\n                                <b-col>\n                                    <span class=\"h5\"><strong>{{row.item.name}} ({{row.item.runStyle}} {{row.item.speedPoints}})</strong>&nbsp;\n                                        <span style=\"float:right;\">\n                                            <b-badge class=\"text-right\" v-if=\"row.item.mtoflag == 'M'\" variant=\"dark\">MTO</b-badge>\n                                            <b-badge v-if=\"row.item.mtoflag == 'A'\" variant=\"dark\">AE</b-badge>\n                                        </span>\n                                    </span>\n                                    <br>\n                                    <strong>Own: {{row.item.owner}}</strong><br>\n                                    {{row.item.ownerSilks}}\n                                </b-col>\n                            </b-row>\n                        </b-col>\n                        <b-col cols=\"3\">\n                            <strong>\n                                {{row.item.color}}. {{row.item.sex}}. {{row.item.age}} ({{row.item.foalingMonth}})  {{row.item.auctionLocationDate}}  <span :class=\"row.item.auctionPrice > 100000 && row.item.lifetimeWins == 0 ? 'greenHighlight' : ''\">{{formatCurrency(row.item.auctionPrice)}}</span><br>\n                                <b-row>\n                                    <b-col cols=\"2\">\n                                        Sire :\n                                    </b-col>\n                                    <b-col>\n                                        {{row.item.sire}} ({{row.item.siresSire}}) {{formatCurrency(row.item.sireStudFee)}}<br>\n                                    </b-col>\n                                </b-row>\n                                <b-row>\n                                    <b-col cols=\"2\">\n                                        Dam  :  \n                                    </b-col>\n                                    <b-col>\n                                        {{row.item.dam}} ({{row.item.damsSire}})<br>\n                                    </b-col>\n                                </b-row>\n                                <b-row>\n                                    <b-col cols=\"2\">\n                                        Brdr :  \n                                    </b-col>\n                                    <b-col>\n                                        {{row.item.breeder}}<br>\n                                    </b-col>\n                                </b-row>\n                                <b-row>\n                                    <b-col cols=\"2\">\n                                        Trnr :  \n                                    </b-col>\n                                    <b-col :class=\"(row.item.trainer.currentMeetStarts == 0 ? 0 : (row.item.trainer.currentMeetWins/row.item.trainer.currentMeetStarts*100) > 20 && row.item.trainer.currentMeetStarts > 20) ? 'greenHighlight' : ''\">\n                                        {{row.item.trainer.name}}  ({{row.item.trainer.currentMeetStarts}} {{row.item.trainer.currentMeetWins}}-{{row.item.trainer.currentMeetPlaces}}-{{row.item.trainer.currentYearShows}} {{row.item.trainer.currentMeetStarts == 0 ? 0 : (row.item.trainer.currentMeetWins/row.item.trainer.currentMeetStarts*100).toFixed(0)}}%)\n                                    </b-col>\n                                </b-row>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \n                            </strong>\n                        </b-col>\n                        <b-col cols=\"1\" class=\"text-right\">\n                            <br><br><strong>{{row.item.weight}}</strong>\n                        </b-col>\n                        <b-col cols=\"4\">\n                            <b-row>\n                                <b-col cols=\"5\" class=\"border-right\">\n                                    <b-row class=\"border-left border-bottom\">\n                                        <b-col cols=\"2\">\n                                            <strong>Life:</strong>  \n                                        </b-col>\n                                        <b-col cols=\"5\">\n                                            {{row.item.lifetimeStarts}}&nbsp;&nbsp;{{row.item.lifetimeWins}}-{{row.item.lifetimePlaces}}-{{row.item.lifetimeShows}}<br>\n                                        </b-col>\n                                        <b-col cols=\"3\">\n                                            {{formatCurrency(row.item.lifetimeEarnings)}}\n                                        </b-col>\n                                        <b-col cols=\"2\">\n                                            <strong>{{row.item.lifetimeBestSpeed}}</strong>\n                                        </b-col>\n                                    </b-row>\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                    <b-row>\n                                        <b-col cols=\"2\">\n                                            <strong>{{row.item.currentYear}}</strong> \n                                        </b-col>\n                                        <b-col cols=\"5\">\n                                            {{row.item.currentYearStarts}}&nbsp;&nbsp;{{row.item.currentYearWins}}-{{row.item.currentYearPlaces}}-{{row.item.currentYearShows}}<br>\n                                        </b-col>\n                                        <b-col cols=\"3\">\n                                            {{formatCurrency(row.item.currentYearEarnings)}}\n                                        </b-col>\n                                        <b-col cols=\"2\">\n                                            <strong>{{row.item.currentYearBestSpeed}}</strong>\n                                        </b-col>\t\t\t\t\t\t\t\t\t\t\n                                    </b-row>\t\n                                    <b-row>\n                                        <b-col cols=\"2\">\n                                            <strong>{{row.item.previousYear}}</strong>  \n                                        </b-col>\n                                        <b-col cols=\"5\">\n                                            {{row.item.previousYearStarts}}&nbsp;&nbsp;{{row.item.previousYearWins}}-{{row.item.previousYearPlaces}}-{{row.item.previousYearShows}}<br>\n                                        </b-col>\n                                        <b-col cols=\"3\">\n                                            {{formatCurrency(row.item.previousYearEarnings)}}\n                                        </b-col>\n                                        <b-col cols=\"2\">\n                                            <strong>{{row.item.previousYearBestSpeed}}</strong>\n                                        </b-col>\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                    </b-row>\t\n                                    <b-row>\n                                        <b-col cols=\"2\">\n                                            <strong>{{row.item.currentTrack}}</strong> \n                                        </b-col>\n                                        <b-col cols=\"5\" :class=\"row.item.trackWins > 0 || row.item.trackPlaces > 2 ? 'greenHighlight' : ''\">\n                                            {{row.item.trackStarts}}&nbsp;&nbsp;{{row.item.trackWins}}-{{row.item.trackPlaces}}-{{row.item.trackShows}}<br>\n                                        </b-col>\n                                        <b-col cols=\"3\">\n                                            {{formatCurrency(row.item.trackEarnings)}}\n                                        </b-col>\n                                        <b-col cols=\"2\">\n                                            <strong>{{row.item.trackBestSpeed}}</strong>\n                                        </b-col>\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                    </b-row>\n                                </b-col>\n                                <b-col cols=\"7\">\n                                    <b-row>\n                                        <b-col cols=\"4\">\n                                            <strong>Fst <span v-if=\"row.item.pedigreeRatingDirt\">({{row.item.pedigreeRatingDirt}})</span></strong>  \n                                        </b-col>\n                                        <b-col cols=\"3\">\n                                            {{row.item.dirtStarts}}&nbsp;{{row.item.dirtWins}}-{{row.item.dirtPlaces}}-{{row.item.dirtShows}}<br>\n                                        </b-col>\n                                        <b-col cols=\"3\">\n                                            {{formatCurrency(row.item.dirtEarnings)}}\n                                        </b-col>\n                                        <b-col cols=\"1\">\n                                            <strong>{{row.item.dirtBestSpeed}}</strong>\n                                        </b-col>\n                                    </b-row>\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                    <b-row>\n                                        <b-col cols=\"4\">\n                                            <strong>Off <span v-if=\"row.item.pedigreeRatingWet\">({{row.item.pedigreeRatingWet}})</span></strong> \n                                        </b-col>\n                                        <b-col cols=\"3\">\n                                            {{row.item.wetStarts}}&nbsp;{{row.item.wetWins}}-{{row.item.wetPlaces}}-{{row.item.wetShows}}<br>\n                                        </b-col>\n                                        <b-col cols=\"3\">\n                                            {{formatCurrency(row.item.wetEarnings)}}\n                                        </b-col>\n                                        <b-col cols=\"1\">\n                                            <strong>{{row.item.wetBestSpeed}}</strong>\n                                        </b-col>\t\t\t\t\t\t\t\t\t\t\n                                    </b-row>\t\n                                    <b-row>\n                                        <b-col cols=\"4\">\n                                            <strong>Dis  <span v-if=\"row.item.pedigreeRatingDistance\">({{row.item.pedigreeRatingDistance}})</span></strong>  \n                                        </b-col>\n                                        <b-col cols=\"3\">\n                                            {{row.item.distanceStarts}}&nbsp;{{row.item.distanceWins}}-{{row.item.distancePlaces}}-{{row.item.distanceShows}}<br>\n                                        </b-col>\n                                        <b-col cols=\"3\">\n                                            {{formatCurrency(row.item.distanceEarnings)}}\n                                        </b-col>\n                                        <b-col cols=\"1\">\n                                            <strong>{{row.item.distanceBestSpeed}}</strong>\n                                        </b-col>\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                    </b-row>\t\n                                    <b-row>\n                                        <b-col cols=\"4\">\n                                            <strong>Trf  <span v-if=\"row.item.pedigreeRatingTurf\">({{row.item.pedigreeRatingTurf}})</span></strong> \n                                        </b-col>\n                                        <b-col cols=\"3\">\n                                            {{row.item.turfStarts}}&nbsp;{{row.item.turfWins}}-{{row.item.turfPlaces}}-{{row.item.turfShows}}<br>\n                                        </b-col>\n                                        <b-col cols=\"3\">\n                                            {{formatCurrency(row.item.turfEarnings)}}\n                                        </b-col>\n                                        <b-col cols=\"1\">\n                                            <strong>{{row.item.turfBestSpeed}}</strong>\n                                        </b-col>\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                    </b-row>\n                                    <b-row>\n                                        <b-col cols=\"4\">\n                                            <strong>AW</strong> \n                                        </b-col>\n                                        <b-col cols=\"3\">\n                                            {{row.item.allWeatherStarts}}&nbsp;{{row.item.allWeatherWins}}-{{row.item.allWeatherPlaces}}-{{row.item.allWeatherShows}}<br>\n                                        </b-col>\n                                        <b-col cols=\"3\">\n                                            {{formatCurrency(row.item.allWeatherEarnings)}}\n                                        </b-col>\n                                        <b-col cols=\"1\">\n                                            <strong>{{row.item.allWeatherBestSpeed}}</strong>\n                                        </b-col>\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                    </b-row>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                </b-col>\n                                <b-col>\n\n                                </b-col>\n                            </b-row>\n                        </b-col>\n\n                    </b-row>\n                    <b-row>\n                        <b-col :class=\"(row.item.jockey.currentMeetStarts == 0 ? 0 : (row.item.jockey.currentMeetWins/row.item.jockey.currentMeetStarts*100) > 20 && row.item.jockey.currentMeetStarts > 20) ? 'greenHighlight' : ''\">\n                            {{row.item.jockey.name}} ({{row.item.jockey.currentMeetStarts}} {{row.item.jockey.currentMeetWins}}-{{row.item.jockey.currentMeetPlaces}}-{{row.item.jockey.currentMeetShows}} {{row.item.jockey.currentMeetStarts == 0 ? 0 : (row.item.jockey.currentMeetWins/row.item.jockey.currentMeetStarts*100).toFixed(0)}}%)<br>\n                        </b-col>\n                    </b-row>\n                    <b-row>\n                        <b-col cols=\"3\">\n                            <b-row>\n                                <b-col cols=\"4\">\n                                    {{row.item.currentYear}}\n                                </b-col>\n                                <b-col cols=\"2\">\n                                    {{row.item.jockey.currentYearStarts}}\n                                </b-col>\n                                <b-col :class=\"(row.item.jockey.currentYearStarts == 0 ? 0 : (row.item.jockey.currentYearWins/row.item.jockey.currentYearStarts*100) > 20 && row.item.jockey.currentYearStarts > 20) ? 'greenHighlight' : ''\">\n                                    {{row.item.jockey.currentYearStarts == 0 ? 0 : (row.item.jockey.currentYearWins/row.item.jockey.currentYearStarts*100).toFixed(0)}}%\n                                </b-col>\n                                <b-col>\n                                    {{row.item.jockey.currentYearStarts == 0 ? 0 : ((row.item.jockey.currentYearWins + row.item.jockey.currentYearPlaces + row.item.jockey.currentYearShows)/row.item.jockey.currentYearStarts*100).toFixed(0)}}%\n                                </b-col>\n                                <b-col>\n                                    {{row.item.jockey.currentYearROI}}\n                                </b-col>\t\t\t\t\t\t\t\t\t\t\t\n                            </b-row>\t\t\t\t\t\t\t\t\t\t\t\n                            <b-row>\n                                <b-col cols=\"4\">\n                                    {{row.item.previousYear}}\n                                </b-col>\n                                <b-col cols=\"2\">\n                                    {{row.item.jockey.previousYearStarts}}\n                                </b-col>\n                                <b-col>\n                                    {{row.item.jockey.previousYearStarts == 0 ? 0 : (row.item.jockey.previousYearWins/row.item.jockey.previousYearStarts*100).toFixed(0)}}%\n                                </b-col>\n                                <b-col>\n                                    {{row.item.jockey.previousYearStarts == 0 ? 0 : ((row.item.jockey.previousYearWins + row.item.jockey.previousYearPlaces + row.item.jockey.previousYearShows)/row.item.jockey.previousYearStarts*100).toFixed(0)}}%\n                                </b-col>\n                                <b-col>\n                                    {{row.item.jockey.previousYearROI}}\n                                </b-col>\t\t\t\t\t\t\t\t\t\t\t\n                            </b-row>\n                            <b-row v-for=\"stat in row.item.jockey.stats\" :key=\"stat.category\">\n                                <b-col cols=\"4\">\n                                    JKYw/ {{stat.category}}\n                                </b-col>\n                                <b-col cols=\"2\">\n                                    {{stat.starts}}\n                                </b-col>\n                                <b-col>\n                                    {{stat.starts == 0 ? 0 : (stat.wins / stat.starts * 100).toFixed(0)}}%\n                                </b-col>\n                                <b-col>\n                                    {{stat.starts == 0 ? 0 : ((stat.wins + stat.places + stat.shows)/ stat.starts * 100).toFixed(0)}}%\n                                </b-col>\n                                <b-col>\n                                    {{stat.roi}}\n                                </b-col>\t\t\t\t\t\t\t\t\t\t\t\n                            </b-row>\t\t\t\t\t\t\t\t\t\t\n                        </b-col>\n                        <b-col cols=\"3\" offset=\"1\">\n                            <b-row>\n                                <b-col cols=\"4\">\n                                    {{row.item.currentYear}}\n                                </b-col>\n                                <b-col cols=\"2\">\n                                    {{row.item.trainer.currentYearStarts}}\n                                </b-col>\n                                <b-col :class=\"(row.item.trainer.currentYearStarts == 0 ? 0 : (row.item.jockey.currentYearWins/row.item.trainer.currentYearStarts*100) > 20 && row.item.trainer.currentYearStarts > 20) ? 'greenHighlight' : ''\">\n                                    {{row.item.trainer.currentYearStarts == 0 ? 0 : (row.item.trainer.currentYearWins/row.item.trainer.currentYearStarts*100).toFixed(0)}}%\n                                </b-col>\n                                <b-col>\n                                    {{row.item.trainer.currentYearStarts == 0 ? 0 : ((row.item.trainer.currentYearWins + row.item.trainer.currentYearPlaces + row.item.trainer.currentYearShows)/row.item.trainer.currentYearStarts*100).toFixed(0)}}%\n                                </b-col>\n                                <b-col>\n                                    {{row.item.trainer.currentYearROI}}\n                                </b-col>\t\t\t\t\t\t\t\t\t\t\t\n                            </b-row>\t\t\t\t\t\t\t\t\t\t\t\n                            <b-row v-for=\"stat in row.item.trainer.trainerStats\" :key=\"stat.category\">\n                                <b-col cols=\"4\">\n                                    {{stat.category}}\n                                </b-col>\n                                <b-col cols=\"2\">\n                                    {{stat.starts}}\n                                </b-col>\n                                <b-col :class=\"stat.winPercent > 20 ? 'greenHighlight' : ''\">\n                                    {{stat.winPercent.toFixed(0)}}%\n                                </b-col>\n                                <b-col>\n                                    {{stat.itmpercent.toFixed(0)}}%\n                                </b-col>\n                                <b-col>\n                                    {{stat.roi.toFixed(2)}}\n                                </b-col>\t\t\t\t\t\t\t\t\t\t\t\n                            </b-row>\t\n                        </b-col>\n                    </b-row>\n                    <b-table\n                        v-if=\"row.item.pastPerformances.length > 0\"\n                        :items=\"row.item.pastPerformances\"\n                        :fields=\"ppFields\"\n                        :tbody-tr-class=\"ppRowClass\"\n                        @row-clicked=\"toggleIgnored\"\n                    >\n                        <template #cell(raceDateString)=\"row\">\n                            {{row.item.raceDateString}}<sup>{{row.item.raceNumber}}</sup>\n                        </template>\n                        <template #cell(dist)=\"row\">\n                            <span v-if=\"row.item.distance<0\"><sup>*</sup></span>\n                            <span v-if=\"Math.abs(row.item.miles==1.5)\">1&frac12;m</span>\n                            <span v-else-if=\"Math.abs(row.item.distance)==1800\">1<sup>40</sup>m</span>\n                            <span v-else-if=\"Math.abs(row.item.distance)==1830\">1<sup>70</sup>m</span>\n                            <span v-else-if=\"Math.abs(row.item.miles)==1.375\">1&frac38;m</span>\n                            <span v-else-if=\"Math.abs(row.item.miles)==1.25\">1&frac14;m</span>\n                            <span v-else-if=\"Math.abs(row.item.miles)==1.125\">1&frac18;m</span>\n                            <span v-else-if=\"Math.abs(row.item.miles)==1.0625\">1<sup>1</sup>&frasl;<sub>16</sub>m</span>\n                            <span v-else-if=\"Math.abs(row.item.miles)==1\">1m</span>\n                            <span v-else-if=\"Math.abs(row.item.furlongs)==4.5\">4&frac12;f</span>\n                            <span v-else-if=\"Math.abs(row.item.furlongs)==5.5\">5&frac12;f</span>\n                            <span v-else-if=\"Math.abs(row.item.furlongs)==6.5\">6&frac12;f</span>\n                            <span v-else-if=\"Math.abs(row.item.furlongs)==7.5\">7&frac12;f</span>\n                            <span v-else>{{Math.abs(row.item.furlongs)}}f</span>\n                        </template>\n                        <template #cell(surface)=\"row\">\n                            <span v-if=\"row.item.surface == 'INNER_DIRT'\"><b-badge variant=\"secondary\"><b-icon-circle-fill></b-icon-circle-fill></b-badge></span>\n                            <span v-if=\"row.item.surface == 'TURF'\"><b-badge pill variant=\"secondary\">&nbsp;T&nbsp;</b-badge></span>\n                            <span v-if=\"row.item.surface == 'INNER_TURF'\"><b-badge variant=\"secondary\">&nbsp;T&nbsp;</b-badge></span>\n                            <span v-if=\"row.item.allWeatherSurfaceFlag == 'A'\"><b-badge pill variant=\"secondary\">A</b-badge></span>\n                            <span v-if=\"row.item.offTheTurfFlag\"><b-badge pill variant=\"secondary\">X</b-badge></span>\n                        </template>\n                        <template #cell(fraction1)=\"row\">\n                            {{Math.floor( row.item.fraction1 / 60)}}:{{str_pad_left(Math.floor(row.item.fraction1 - Math.floor( row.item.fraction1 / 60) * 60),'0',2)}}\n                            <sup v-if=\"(Math.floor((row.item.fraction1 % 1) * 5) / 5).toFixed(1) * 5 != 0\">{{(Math.floor((row.item.fraction1 % 1) * 5) / 5).toFixed(1) * 5}}</sup>\n                        </template>\t\t\t\t\t\t\t\t\t\n                        <template #cell(fraction2)=\"row\">\n                            {{Math.floor( row.item.fraction2 / 60)}}:{{str_pad_left(Math.floor(row.item.fraction2 - Math.floor( row.item.fraction2 / 60) * 60),'0',2)}}\n                            <sup v-if=\"(Math.floor((row.item.fraction2 % 1) * 5) / 5).toFixed(1) * 5 != 0\">{{(Math.floor((row.item.fraction2 % 1) * 5) / 5).toFixed(1) * 5}}</sup>\n                        </template>\t\t\t\t\t\t\t\t\t\n                        <template #cell(fraction3)=\"row\">\n                            {{Math.floor( row.item.fraction3 / 60)}}:{{str_pad_left(Math.floor(row.item.fraction3 - Math.floor( row.item.fraction3 / 60) * 60),'0',2)}}\n                            <sup v-if=\"(Math.floor((row.item.fraction3 % 1) * 5) / 5).toFixed(1) * 5 != 0\">{{(Math.floor((row.item.fraction3 % 1) * 5) / 5).toFixed(1) * 5}}</sup>\n                        </template>\n                        <template #cell(finalTime)=\"row\">\n                            {{Math.floor( row.item.finalTime / 60)}}:{{str_pad_left(Math.floor(row.item.finalTime - Math.floor( row.item.finalTime / 60) * 60),'0',2)}}\n                            <sup v-if=\"(Math.floor((row.item.finalTime % 1) * 5) / 5).toFixed(1) * 5 != 0\">{{(Math.floor((row.item.finalTime % 1) * 5) / 5).toFixed(1) * 5}}</sup>\n                        </template>\n                        <template #cell(raceClassification)=\"row\">\n                            <span v-if=\"row.item.raceClassification.substring(0,1) == 's'\"><b-badge variant=\"secondary\">S</b-badge>{{row.item.raceClassification.substring(1)}}</span>\n                            <span v-else-if=\"row.item.raceClassification.substring(0,1) == 'f'\"><b-badge variant=\"secondary\">F</b-badge>{{row.item.raceClassification.substring(1)}}</span>\n                            <span v-else-if=\"row.item.raceClassification.substring(0,1) == 'r'\"><b-badge variant=\"secondary\">R</b-badge>{{row.item.raceClassification.substring(1)}}</span>\n                            <span v-else>{{row.item.raceClassification}}</span>\n                        </template>\n                        <template #cell(e2)=\"row\">\n                            {{row.item.e2}}/\n                        </template>\n                        <template #cell(raceShapeFirstCall)=\"row\">\n                            <span v-if=\"row.item.raceShapeFirstCall > 0\">+</span>{{row.item.raceShapeFirstCall}}\n                        </template>\n                        <template #cell(raceShapeSecondCall)=\"row\">\n                            <span v-if=\"row.item.raceShapeSecondCall > 0\">+</span>{{row.item.raceShapeSecondCall}}\n                        </template>\t\t\t\t\t\t\t\t\t\n                        <template #cell(firstCallPosition)=\"row\">\n                            {{row.item.firstCallPosition}}<sup>{{row.item.firstCallBeatenLengthsLeader.toFixed(2)}}</sup>\n                        </template>\t\n                        <template #cell(secondCallPosition)=\"row\">\n                            {{row.item.secondCallPosition}}<sup>{{row.item.secondCallBeatenLengthsLeader.toFixed(2)}}</sup>\n                        </template>\n                        <template #cell(stretchPosition)=\"row\">\n                            {{row.item.stretchPosition}}<sup>{{row.item.stretchBeatenLengthsLeader.toFixed(2)}}</sup>\n                        </template>\t\n                        <template #cell(finishPosition)=\"row\">\n                            {{row.item.finishPosition}}<sup>{{row.item.finishBeatenLengthsLeader.toFixed(2)}}</sup>\n                        </template>\t\n                        <template #cell(jockey)=\"row\">\t\n                            {{shortenJockeyName(row.item.jockey)}}<sup>{{row.item.weight}}</sup>\n                        </template>\t\t\n                        <template #cell(medication)=\"row\">\t\n                            {{row.item.equipment}}<span v-if=\"row.item.medication == 'LASIX'\">L</span>\n                        </template>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n                        <template #cell(odds)=\"row\">\t\n                            <span v-if=\"row.item.favoriteFlag > 0\"><sup>*</sup></span>{{format2Places(row.item.odds)}}\n                        </template>\t\n                        <template #cell(finishers)=\"row\">\t\n                            <span :class=\"alsoInRace(row.item.winnersName, row.item)\">{{row.item.winnersName}}</span><sup>{{row.item.winnersMargin.toFixed(2)}}</sup>\n                            <span :class=\"alsoInRace(row.item.placeName, row.item)\">{{row.item.placeName}}</span><sup>{{row.item.placeMargin.toFixed(2)}}</sup>\n                            <span :class=\"alsoInRace(row.item.showName, row.item)\">{{row.item.showName}}</span><sup>{{row.item.showMargin.toFixed(2)}}</sup>\n                        </template>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n                    </b-table>\n                    <b-badge variant=\"light\" v-for=\"workout in row.item.workouts\" :key=\"workout.date\" border-variant=\"dark\" class=\"p0\">\n                        <b-icon-circle-fill v-if=\"workout.timeOfWorkout < 0\"></b-icon-circle-fill>\n                        {{workout.dateOfWorkoutString}} {{workout.trackOfWorkout}} {{workout.furlongs}}f {{workout.workoutTrackIndicator}} \n                        <span :class=\"fastWorkout(workout)\">\n                            {{Math.floor( Math.abs(workout.timeOfWorkout) / 60)}}:{{str_pad_left(Math.floor(Math.abs(workout.timeOfWorkout) - Math.floor(Math.abs(workout.timeOfWorkout) / 60) * 60),'0',2)}}<sup v-if=\"(Math.floor((Math.abs(workout.timeOfWorkout) % 1) * 5) / 5).toFixed(1) * 5 != 0\">{{(Math.floor((Math.abs(workout.timeOfWorkout) % 1) * 5) / 5).toFixed(1) * 5}}</sup>\n                        </span>\n                        {{workout.description}} {{workout.rank}}/{{workout.numberOfWorks}}&nbsp;&nbsp;&nbsp;</b-badge>\t\t\t\t\t\t\t\t\t\t\n                </b-container>\n            </template>\t\t\t\t\t\t\t\t\t\t\t\n        </b-table>\n    </div>\n\n</template>\n\n<script>\nimport { BIconTypeUnderline, BIconTypeStrikethrough, BIconInfo, BIconCircleFill } from 'bootstrap-vue'\n\nimport axios from 'axios'\nimport _ from 'underscore'\n\nexport default {\n    name: 'RaceView',\n    components: {\n\t\tBIconTypeUnderline, BIconTypeStrikethrough, BIconInfo, BIconCircleFill\n    },\n    props : ['race'],\n    data () {\n\t\treturn {\n            transProps: {\n\t\t\t\tname: 'flip-list'\n\t\t\t},\n\t\t\thorseFields: [\n\t\t\t\t{key: \"scratchButton\", label:\"\"},\n\t\t\t\t{key: \"programNumber\", label:\"#\"},\n\t\t\t\t{key: \"mlodds\", \"label\": \"ML\", sortable:true},\n\t\t\t\t{key: \"name\"},\n\t\t\t\t{key: \"daysSinceLastRace\", label:\"l/r\", tdClass: this.highlightDaysSince},\n\t\t\t\t{key: \"furlongDays\", label: \"FD\", formatter: this.format2Places, sortable: true},\n\t\t\t\t{key: \"style\", label: \"Style\", tdClass: this.highlightPaceAdvantage },\n\t\t\t\t{key: \"classRating\", label:\"Class\", formatter: this.format2Places, sortable: true, tdClass: this.highlightMax},\n\t\t\t\t{key: \"averageCompetitiveLevel\", label:\"ACL\", formatter: this.format2Places, sortable: true, tdClass: this.highlightMax},\n\t\t\t\t{key: \"speedRating\", label:\"Speed\", formatter: this.format2Places, sortable: true, tdClass: this.highlightMax},\n\t\t\t\t{key: \"arating\", label: \"AR\", formatter: this.format2Places, sortable: true, tdClass: this.highlightMax},\n\t\t\t\t{key: \"aratingClass\", label:\"AR Cl\", formatter: this.format2Places, sortable: true, tdClass: this.highlightMax},\n\t\t\t\t{key: \"aratingForm\", label:\"AR F\", formatter: this.format2Places, sortable: true, tdClass: this.highlightMax}, \n\t\t\t\t{key: \"aratingConnections\", label:\"AR Co\", formatter: this.format2Places, sortable: true, tdClass: this.highlightMax},\n\t\t\t\t{key: \"e1Avg\", label:\"E1\", formatter: this.formatInt, sortable: true, tdClass: this.highlightMax},\n\t\t\t\t{key: \"e2Avg\", label:\"E2\", formatter: this.formatInt, sortable: true, tdClass: this.highlightMax},\n\t\t\t\t{key: \"turnTime\", label:\"TT\", formatter: this.formatInt, sortable: true, tdClass: this.highlightMax},\n\t\t\t\t{key: \"latePaceAvg\", label:\"Late\", formatter: this.formatInt, sortable: true, tdClass: this.highlightMax},\n\t\t\t\t{key: \"combinedPaceAvg\", label:\"Comb\", formatter: this.format2Places, sortable: true, tdClass: this.highlightMax},\n\t\t\t\t{key: \"classShift\", label:\"cSh\", formatter: this.format2Places, sortable: true, tdClass: this.highlightShift},\n\t\t\t\t{key: \"purseShift\", label:\"pSh\", formatter: this.formatInt, sortable: true, tdClass: this.highlightShift},\n\t\t\t\t{key: \"detailsButton\", label:\"\"},\n\t\t\t\t{key: \"_showDetails\", thClass: 'd-none', tdClass: 'd-none' }\n\n\t\t\t],\n\t\t\tppFields: [\n\t\t\t\t{key: \"raceDateString\", label: \"DATE\",tdClass: this.highlightDaysSincePP},\n\t\t\t\t{key: \"daysSinceLastRace\", label: \"LR\"},\n\t\t\t\t{key: \"trackCode\", label: \"TRK\"},\n\t\t\t\t{key: \"surface\", label: \"\", tdClass: this.highlightSimilarSurfDist},\n\t\t\t\t{key: \"dist\", lable: \"DIST\", tdClass: this.highlightSimilarSurfDist},\n\t\t\t\t{key: \"trackCondition\", label: \"\", tdClass: this.highlightSimilarSurfDist},\n\t\t\t\t{key: \"fraction1\", label: \"\"},\n\t\t\t\t{key: \"fraction2\", label: \"\"},\n\t\t\t\t{key: \"fraction3\", label: \"\"},\n\t\t\t\t{key: \"finalTime\", label: \"\"},\n\t\t\t\t{key: \"raceStrength\", label: \"RS\", formatter: this.format2Places},\n\t\t\t\t{key: \"raceClassification\", label: \"RACETYPE\"},\n\t\t\t\t{key: \"purse\", tdClass: this.highlightPurseShift},\n\t\t\t\t{key: \"e1\"},\n\t\t\t\t{key: \"e2\", label: \"E2/\"},\n\t\t\t\t{key: \"paceFigureLate\", label: \"LP\"},\n\t\t\t\t{key: \"raceShapeFirstCall\", label: \"1c\"},\n\t\t\t\t{key: \"raceShapeSecondCall\", label: \"2c\"},\n\t\t\t\t{key: \"brisspeedRating\", label: \"SPD\", class: \"strong\", tdClass: this.highlightSpeedInRange},\n\t\t\t\t{key: \"postPosition\", label: \"PP\"},\n\t\t\t\t{key: \"startCallPosition\", label: \"ST\"},\n\t\t\t\t{key: \"firstCallPosition\", label: \"1C\"},\n\t\t\t\t{key: \"secondCallPosition\", label: \"2C\"},\n\t\t\t\t{key: \"stretchPosition\", label: \"STR\"},\n\t\t\t\t{key: \"finishPosition\", label: \"FIN\", tdClass: this.highlightFinish},\n\t\t\t\t{key: \"jockey\", label: \"JOCKEY\"},\n\t\t\t\t{key: \"medication\", label: \"\"},\n\t\t\t\t{key: \"odds\", label: \"ODDS\", tdClass: this.highlightBeatenFavorite},\n\t\t\t\t{key: \"finishers\", label: \"Top Finishers\"},\n\t\t\t\t{key: \"tripComment\", label: \"Comment\"},\n\t\t\t\t{key: \"numberOfEntrants\", label: \"\"},\n\t\t\t],\n\t\t\ttrackConditions: [\n\t\t\t\t{value: \"ft\", text: \"Fast\"},\n\t\t\t\t{value: \"my\", text: \"Muddy\"},\n\t\t\t\t{value: \"wf\", text: \"Wet Fast\"},\n\t\t\t\t{value: \"yl\", text: \"Yielding\"},\n\t\t\t\t{value: \"hy\", text: \"Heavy\"},\n\t\t\t\t{value: \"gd\", text: \"Good\"},\n\t\t\t\t{value: \"sy\", text: \"Sloppy\"},\n\t\t\t\t{value: \"fm\", text: \"Firm\"},\n\t\t\t\t{value: \"sf\", text: \"Soft\"},\n\t\t\t\t{value: \"sl\", text: \"Slow\"}\n\t\t\t]\n        }\n    },\n    methods:  {\n\t\tasync toggleScratch(item) {\n            try {\n\t\t\t\tvar race = _.find(this.races, function(r){\n\t\t\t\t\treturn r.raceNumber == item.raceNumber;\n\t\t\t\t});\n                await axios({\n                    url: 'toggleScratch/' + race.raceNumber + '/' + item.programNumber,\n                    method: 'GET',\n                    baseURL: 'http://localhost:8080/jpp/rest/remote/'\n                });\n                item.scratchedFlag = !item.scratchedFlag;\n            } catch (err) {\n                console.log(err.response);\n                \n            }\n\t\t},\n\t\tasync toggleIgnored(item) {\n            try {\n\t\t\t\tvar race = _.find(this.races, function(r){\n\t\t\t\t\treturn r.raceNumber == item.raceNumber;\n\t\t\t\t});\n                await axios({\n                    url: 'toggleIgnored/' + race.raceNumber + '/' + item.programNumber + '/' + item.raceDate[0] + '/' + item.raceDate[1] + '/' + item.raceDate[2],\n                    method: 'GET',\n                    baseURL: 'http://localhost:8080/jpp/rest/remote/'\n                });\n                item.ignoredFlag = !item.ignoredFlag;\n\t\t\t\tconsole.log(item);\n            } catch (err) {\n                console.log(err.response);\n                \n            }\n\t\t},\t\t\n\t\tasync updateCondition(race) {\n            try {\n                const response = await axios({\n                    url: 'setTrackCondition/' + race.raceNumber + '/' + race.trackCondition,\n                    method: 'GET',\n                    baseURL: 'http://localhost:8080/jpp/rest/remote/'\n                });\n\t\t\t\tthis.races = response.data;\n            } catch (err) {\n                console.log(err.response);\n                \n            }\t\t\n\t\t},\n\t\tasync toggleOffTheTurf(race) {\n            try {\n                const response = await axios({\n                    url: 'toggleOffTheTurf/' + race.raceNumber,\n                    method: 'GET',\n                    baseURL: 'http://localhost:8080/jpp/rest/remote/'\n                });\n\t\t\t\tthis.races = response.data;\n            } catch (err) {\n                console.log(err.response);\n                \n            }\t\t\n\t\t},\t\t\n\t\trowClass(item, type) {\n\t\t\tif (!item || type !== 'row') return;\n\t\t\tif (item.scratchedFlag) return 'table-dark scratched'\n\t\t\treturn 'notScratched';\n\t\t},\n\t\tppRowClass(item, type) {\n\t\t\tif (!item || type !== 'row') return;\n\t\t\tvar c = \"\";\n\t\t\t\n\t\t\tif (item.over365Days) c += \"diff365\";\n\t\t\tif (item.over90Days && !item.over365Days) c += \"diff90\";\n\t\t\t\n\t\t\tif (item.ignoreFlag) c += \" ignored\";\n\t\t\t\n\t\t\treturn c;\n\t\t},\n\t\ttoggleAll(race, b) {\n\t\t\t_.each(race.horses, function(horse){\t\t\n\t\t\t\thorse._showDetails = b;\n\t\t\t});\n\t\t},\t\t\n\t\tfractionString(decimal) {\n\t\t\tswitch(decimal) {\n\t\t\t\tcase 0.13:\n\t\t\t\t\treturn \"hd\";\n\t\t\t\tcase 0.25:\n\t\t\t\t\treturn \"&frac14;\";\n\t\t\t\tcase 0.5:\n\t\t\t\t\treturn \"&frac12;\";\n\t\t\t\tcase 0.75:\n\t\t\t\t\treturn \"&frac34;\";\n\t\t\t}\n\t\t},\n\t\tshortenJockeyName(value) {\n\t\t\treturn value.split(\" \")[0] + value.split(\" \")[1].charAt(0);\n\t\t},\n\t\tformat2Places(amount) {\n\t\t\tconst formatter = new Intl.NumberFormat('en-US', {\n\n\n\t\t\t\t// These options are needed to round to whole numbers if that's what you want.\n\t\t\t\tminimumFractionDigits: 2, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n\t\t\t\tmaximumFractionDigits: 2, // (causes 2500.99 to be printed as $2,501)\n\t\t\t});\n\t\t\treturn formatter.format(amount);\n\t\t}  ,\n\t\tformatInt(amount) {\n\t\t\tconst formatter = new Intl.NumberFormat('en-US', {\n\n\n\t\t\t\t// These options are needed to round to whole numbers if that's what you want.\n\t\t\t\tminimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n\t\t\t\tmaximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n\t\t\t});\n\t\t\treturn formatter.format(amount);\n\t\t},\n\t\tformatCurrency(amount) {\n\t\t\tconst formatter = new Intl.NumberFormat('en-US', {\n\t\t\t\tstyle: 'currency',\n\t\t\t\tcurrency: 'USD',\n\n\t\t\t\t// These options are needed to round to whole numbers if that's what you want.\n\t\t\t\tminimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n\t\t\t\tmaximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n\t\t\t});\n\t\t\treturn formatter.format(amount);\n\t\t},\t\n\t\tstr_pad_left(string,pad,length) {\n\t\t\treturn (new Array(length+1).join(pad)+string).slice(-length);\n\t\t},\t\n\t\thighlightMax(value, key, item) {\n\t\t\tvar race = _.find(this.races, function(r){\n\t\t\t\treturn r.raceNumber == item.raceNumber;\n\t\t\t});\n\n\t\t\tvar values = _.pluck(_.reject(race.horses, function(h) {\n\t\t\t\treturn h.scratchedFlag;\n\t\t\t}), key);\n\n\t\t\tif (value == _.max(values)) {\n\t\t\t\treturn \"greenHighlight\";\n\t\t\t}\n\t\t},\n\t\thighlightDaysSince(value) {\n\t\t\tif (value  > 180) return \"gt180\";\n\t\t\tif (value > 90) return \"gt90\";\n\t\t\tif (value > 45) return \"gt45\";\n\t\t},\n\t\thighlightDaysSincePP(value, key , item) {\n\t\t\tif (item.daysSinceLastRace  > 180) return \"gt180\";\n\t\t\tif (item.daysSinceLastRace > 90) return \"gt90\";\n\t\t\tif (item.daysSinceLastRace > 45) return \"gt45\";\n\t\t},\t\n\t\thighlightFinish(value, key, item) {\n\t\t\tif (item.finishPosition == \"1\") return \"greenHighlight\";\n\t\t\tif (item.finishPosition == \"2\" || item.finishPosition == \"3\") return \"lightGreenHighlight\";\n\t\t},\t\n\t\thighlightBeatenFavorite(value,key,item) {\n\t\t\tif (item.favoriteFlag && item.finishPosition != \"1\") return \"yellowHighlight\";\n\t\t},\n\t\thighlightPurseShift(value,key,item) {\n\t\t\tvar race = _.find(this.races, function(r){\n\t\t\t\treturn r.raceNumber == item.thisRaceNumber;\n\t\t\t});\n\n\t\t\tif (item.purse >= race.purse + 20000 ) return \"greenHighlight\";\n\t\t\tif (item.purse > race.purse) return \"lightGreenHighlight\";\n\t\t\tif (item.purse == race.purse) return \"\";\n\t\t\tif (item.purse < race.purse - 10000) return \"yellowHighlight\";\n\t\t\tif (item.purse < race.purse - 20000) return \"lightRedHighlight\";\n\t\t\tif (item.purse < race.purse - 30000) return \"redHighlight\";\n\t\t},\n\t\thighlightSpeedInRange(value,key,item) {\n\t\t\tvar race = _.find(this.races, function(r){\n\t\t\t\treturn r.raceNumber == item.thisRaceNumber;\n\t\t\t});\n\n\t\t\tif (item.brisspeedRating >= race.parSpeed) return \"greenHighlight\";\n\t\t\tif (item.brisspeedRating >= race.parSpeed - 3) return \"lightGreenHighlight\";\n\t\t},\n\t\thighlightPaceAdvantage(value, key, item) {\n\t\t\tvar race = _.find(this.races, function(r){\n\t\t\t\treturn r.raceNumber == item.raceNumber;\n\t\t\t});\n\n\t\t\tif (_.contains(_.pluck(race.advantagedHorses,\"programNumber\"), item.programNumber)) return \"greenHighlight\";\n\t\t},\n\t\thighlightShift(value) {\n\t\t\tif (value < 0) return \"greenHighlight\";\n\t\t\tif (value > 0) return \"yellowHighlight\";\n\t\t},\n\t\thighlightSimilarSurfDist(value, key, item) {\n\t\t\tvar race = _.find(this.races, function(r){\n\t\t\t\treturn r.raceNumber == item.thisRaceNumber;\n\t\t\t});\n\n\t\t\tif (race.surface.indexOf(\"TURF\") > -1 && !race.offTheTurfFlag) {\n\t\t\t\tif (\n\t\t\t\t\titem.surface.indexOf(\"TURF\") > -1 \n\t\t\t\t\t&& ((race.trackCondition == \"fm\" && item.trackCondition == \"fm\") || (race.trackCondition != \"fm\" && [\"tf\",\"gd\",\"gf\",\"hd\",\"yl\",\"sf\",\"hy\",\"sl\"].indexOf(item.trackCondition) > -1))\n\t\t\t\t\t&& ((race.furlongs < 8 && item.furlongs < 8) || (race.furlongs >= 8 && item.furlongs >= 8))) \n\t\t\t\t\treturn \"blueHighlight\";\n\t\t\t} else {\n\t\t\t\tif ((item.surface.indexOf(\"TURF\") == -1 || item.offTheTurfFlag)\n\t\t\t\t\t&& ((race.trackCondition == \"ft\" && item.trackCondition == \"ft\") || (race.trackCondition != \"ft\" && [\"gd\",\"hy\",\"my\",\"sl\",\"sy\",\"wf\"].indexOf(item.trackCondition) > -1))\n\t\t\t\t\t&& ((race.furlongs < 8 && item.furlongs < 8) || (race.furlongs >= 8 && item.furlongs >= 8))) \n\t\t\t\t\treturn \"blueHighlight\";\n\t\t\t}\n\t\t},\n\t\talsoInRace(nameToMatch, row) {\n\t\t\tvar race = _.find(this.races, function(r){\n\t\t\t\treturn r.raceNumber == row.thisRaceNumber;\n\t\t\t});\n\t\t\tvar names = _.pluck(race.horses, \"name\");\n\t\t\tif (names.indexOf(nameToMatch) > -1 && nameToMatch != row.name) return \"alsoInRace\";\n\n\t\t},\n\t\tfastWorkout(workout) {\n\t\t\tif (Math.floor(Math.abs(workout.timeOfWorkout) / workout.furlongs < 12)) return \"greenHighlight\";\n\t\t\tif (Math.floor(Math.abs(workout.timeOfWorkout)) ==  12 * workout.furlongs) return \"lightGreenHighlightBorder\";\n\t\t}\n    }\n\n}\n</script>\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}