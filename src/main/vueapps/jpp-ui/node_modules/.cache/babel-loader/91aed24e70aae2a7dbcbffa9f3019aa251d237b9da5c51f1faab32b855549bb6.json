{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { BIconCircleFill, BIconArrowDown, BIconArrowUp, BIconCaretUpFill } from 'bootstrap-vue';\nimport axios from 'axios';\nimport _ from 'underscore';\nexport default {\n  name: 'PastPerformanceView',\n  components: {\n    BIconCircleFill,\n    BIconArrowDown,\n    BIconArrowUp,\n    BIconCaretUpFill\n  },\n  props: ['horse', 'race'],\n  data() {\n    return {\n      ppFields: [{\n        key: \"raceDateString\",\n        label: \"DATE\"\n      }, {\n        key: \"daysSinceLastRace\",\n        label: \"LR\",\n        title: \"Days Since Last Race\",\n        tdClass: this.highlightDaysSincePP\n      }, {\n        key: \"trackCode\",\n        label: \"TRK\",\n        title: \"Track\"\n      }, {\n        key: \"surface\",\n        label: \"\",\n        tdClass: this.highlightSimilarSurfDist\n      }, {\n        key: \"dist\",\n        label: \"DIST\",\n        title: \"Distance\",\n        tdClass: this.highlightSimilarSurfDist\n      }, {\n        key: \"trackCondition\",\n        label: \"\",\n        tdClass: this.highlightSimilarSurfDist\n      }, {\n        key: \"fraction1\",\n        label: \"1C\",\n        title: \"1st Call Fraction\"\n      }, {\n        key: \"fraction2\",\n        label: \"2C\",\n        title: \"2nd Call Fraction\"\n      }, {\n        key: \"fraction3\",\n        label: \"STR\",\n        title: \"Stretch Call Fraction\"\n      }, {\n        key: \"finalTime\",\n        label: \"FIN\",\n        title: \"Final Fraction\",\n        tdClass: this.highlightFinalFraction\n      }, {\n        key: \"raceStrength\",\n        label: \"RS\",\n        title: \"Race Strength (Winner's Speed Figure)\",\n        formatter: this.format2Places,\n        tdClass: this.highlightRaceStrength\n      }, {\n        key: \"ageRange\",\n        label: \"\"\n      }, {\n        key: \"raceClassification\",\n        label: \"RACETYPE\",\n        title: \"Race Classification\"\n      }, {\n        key: \"purse\",\n        tdClass: this.highlightPurseShift\n      }, {\n        key: \"trainerAndClaimFlag\",\n        label: \"Trnr\"\n      }, {\n        key: \"e1\",\n        tdClass: this.highlightPace,\n        title: \"1st Call Pace Rating (Start to 2F in sprints, 4F in routes)\"\n      }, {\n        key: \"e2\",\n        label: \"E2/\",\n        title: \"2nd Call Pace Rating (Start to 4F in sprints, 6F in most routes)\",\n        tdClass: this.highlightPace\n      }, {\n        key: \"paceFigureLate\",\n        label: \"LP\",\n        title: \"Late Pace Rating (2nd Call to Finish)\",\n        tdClass: this.highlightPace\n      }, {\n        key: \"raceShapeFirstCall\",\n        title: \"1st Call Race Shape (leader's pace compared to average)\",\n        label: \"1c\",\n        tdClass: this.highlightRaceShape\n      }, {\n        key: \"raceShapeSecondCall\",\n        title: \"2nd Call Race Shape (leader's pace compared to average)\",\n        label: \"2c\",\n        tdClass: this.highlightRaceShape\n      }, {\n        key: \"brisspeedRating\",\n        label: \"SPD\",\n        title: \"BRIS Speed Rating and Race Par\",\n        class: \"strong\",\n        tdClass: this.highlightSpeedInRange\n      }, {\n        key: \"raceShape\",\n        label: \"Shp\",\n        title: \"Race Shape (1st Call Pace and Final Speed - e.g., FF is Fast/Fast, AS is Average/Slow)\",\n        tdClass: this.highlightRaceShape2\n      }, {\n        key: \"speedRating\",\n        title: \"DRF Speed Rating and Track Variant\",\n        label: \"SR-TV\"\n      }, {\n        key: \"postPosition\",\n        title: \"Post Position\",\n        label: \"PP\"\n      }, {\n        key: \"startCallPosition\",\n        title: \"Start Call Position\",\n        label: \"ST\"\n      }, {\n        key: \"firstCallPosition\",\n        title: \"First Call Position\",\n        label: \"1C\"\n      }, {\n        key: \"secondCallPosition\",\n        title: \"Second Call Position\",\n        label: \"2C\"\n      }, {\n        key: \"stretchPosition\",\n        title: \"Stretch Call Position\",\n        label: \"STR\"\n      }, {\n        key: \"finishPosition\",\n        title: \"Finish Position\",\n        label: \"FIN\",\n        tdClass: this.highlightFinish\n      }, {\n        key: \"jockey\",\n        label: \"JOCKEY\"\n      }, {\n        key: \"medication\",\n        label: \"\"\n      }, {\n        key: \"odds\",\n        label: \"ODDS\",\n        tdClass: this.highlightBeatenFavorite\n      }, {\n        key: \"finishers\",\n        label: \"Top Finishers\"\n      }, {\n        key: \"tripComment\",\n        label: \"Comment\"\n      }, {\n        key: \"numberOfEntrants\",\n        label: \"\"\n      }]\n    };\n  },\n  methods: {\n    async toggleIgnored(item) {\n      try {\n        await axios({\n          url: 'toggleIgnored/' + this.race.raceNumber + '/' + this.horse.programNumber + '/' + item.raceDate[0] + '/' + item.raceDate[1] + '/' + item.raceDate[2],\n          method: 'GET',\n          baseURL: 'http://localhost:8080/jpp/rest/remote/'\n        });\n        item.ignore = !item.ignore;\n      } catch (err) {\n        console.log(err.response);\n      }\n    },\n    ppRowClass(item, type) {\n      if (!item || type !== 'row') return;\n      var c = \"\";\n      if (item.over365Days) c += \"diff365\";\n      if (item.over90Days && !item.over365Days) c += \"diff90\";\n      if (item.ignore) c += \" table-dark ignored\";\n      return c;\n    },\n    fractionString(decimal) {\n      switch (decimal) {\n        case 0.13:\n          return \"hd\";\n        case 0.25:\n          return \"&frac14;\";\n        case 0.5:\n          return \"&frac12;\";\n        case 0.75:\n          return \"&frac34;\";\n      }\n    },\n    shortenName(value) {\n      var words = this.properize(value).split(\" \");\n      var ret = words[0];\n      for (var i = 1; i < words.length; i++) {\n        ret += words[i].charAt(0);\n      }\n      return ret;\n    },\n    properize(name) {\n      var upperCase = /^[A-Z]/; //Regexp for all UPPERCASE words\n      var suffixes = new Array(\"II\", \"(II)\", \"III\", \"(III)\", \"IV\", \"(IV)\", \"VI\", \"(VI)\", \"VII\", \"(VII)\", \"2nd\", \"(2nd)\", \"3rd\", \"(3rd)\", \"4th\", \"(4th)\", \"5th\", \"(5th)\");\n      var surnames = new Array(\"ApShaw\", \"d'Albini\", \"d'Aubigney\", \"d'Aubigne\", \"d'Autry\", \"d'Entremont\", \"d'Hurst\", \"D'ovidio\", \"da Graca\", \"DaSilva\", \"DeAnda\", \"deAnnethe\", \"deAubigne\", \"deAubigny\", \"DeBardelaben\", \"DeBardeleben\", \"DeBaugh\", \"deBeauford\", \"DeBerry\", \"deBethune\", \"DeBetuile\", \"DeBoard\", \"DeBoer\", \"DeBohun\", \"DeBord\", \"DeBose\", \"DeBrouwer\", \"DeBroux\", \"DeBruhl\", \"deBruijn\", \"deBrus\", \"deBruse\", \"deBrusse\", \"DeBruyne\", \"DeBusk\", \"DeCamp\", \"deCastilla\", \"DeCello\", \"deClare\", \"DeClark\", \"DeClerck\", \"DeCoste\", \"deCote\", \"DeCoudres\", \"DeCoursey\", \"DeCredico\", \"deCuire\", \"DeCuyre\", \"DeDominicios\", \"DeDuyster\", \"DeDuytscher\", \"DeDuytser\", \"deFiennes\", \"DeFord\", \"DeForest\", \"DeFrance\", \"DeFriece\", \"DeGarmo\", \"deGraaff\", \"DeGraff\", \"DeGraffenreid\", \"DeGraw\", \"DeGrenier\", \"DeGroats\", \"DeGroft\", \"DeGrote\", \"DeHaan\", \"DeHaas\", \"DeHaddeclive\", \"deHannethe\", \"DeHatclyf\", \"DeHaven\", \"DeHeer\", \"DeJager\", \"DeJarnette\", \"DeJean\", \"DeJong\", \"deJonge\", \"deKemmeter\", \"deKirketon\", \"DeKroon\", \"deKype\", \"del-Rosario\", \"dela Chamotte\", \"DeLa Cuadra\", \"DeLa Force\", \"dela Fountaine\", \"dela Grena\", \"dela Place\", \"DeLa Ward\", \"DeLaci\", \"DeLacy\", \"DeLaet\", \"DeLalonde\", \"DelAmarre\", \"DeLancey\", \"DeLascy\", \"DelAshmutt\", \"DeLassy\", \"DeLattre\", \"DeLaughter\", \"DeLay\", \"deLessine\", \"DelGado\", \"DelGaudio\", \"DeLiberti\", \"DeLoache\", \"DeLoatch\", \"DeLoch\", \"DeLockwood\", \"DeLong\", \"DeLozier\", \"DeLuca\", \"DeLucenay\", \"deLucy\", \"DeMars\", \"DeMartino\", \"deMaule\", \"DeMello\", \"DeMinck\", \"DeMink\", \"DeMoree\", \"DeMoss\", \"DeMott\", \"DeMuynck\", \"deNiet\", \"DeNure\", \"DePalma\", \"DePasquale\", \"dePender\", \"dePercy\", \"DePoe\", \"DePriest\", \"DePu\", \"DePui\", \"DePuis\", \"DeReeper\", \"deRochette\", \"deRose\", \"DeRossett\", \"DeRover\", \"deRuggele\", \"deRuggle\", \"DeRuyter\", \"deSaint-Sauveur\", \"DeSantis\", \"desCuirs\", \"DeSentis\", \"DeShane\", \"DeSilva\", \"DesJardins\", \"DesMarest\", \"deSoleure\", \"DeSoto\", \"DeSpain\", \"DeStefano\", \"deSwaert\", \"deSwart\", \"DeVall\", \"DeVane\", \"DeVasher\", \"DeVasier\", \"DeVaughan\", \"DeVaughn\", \"DeVault\", \"DeVeau\", \"DeVeault\", \"deVilleneuve\", \"DeVilliers\", \"DeVinney\", \"DeVito\", \"deVogel\", \"DeVolder\", \"DeVolld\", \"DeVore\", \"deVos\", \"DeVries\", \"deVries\", \"DeWall\", \"DeWaller\", \"DeWalt\", \"deWashington\", \"deWerly\", \"deWessyngton\", \"DeWet\", \"deWinter\", \"DeWitt\", \"DeWolf\", \"DeWolfe\", \"DeWolff\", \"DeWoody\", \"DeYager\", \"DeYarmett\", \"DeYoung\", \"DiCicco\", \"DiCredico\", \"DiFillippi\", \"DiGiacomo\", \"DiMarco\", \"DiMeo\", \"DiMonte\", \"DiNonno\", \"DiPietro\", \"diPilato\", \"DiPrima\", \"DiSalvo\", \"du Bosc\", \"du Hurst\", \"DuFort\", \"DuMars\", \"DuPre\", \"DuPue\", \"DuPuy\", \"FitzUryan\", \"kummel\", \"LaBarge\", \"LaBarr\", \"LaBauve\", \"LaBean\", \"LaBelle\", \"LaBerteaux\", \"LaBine\", \"LaBonte\", \"LaBorde\", \"LaBounty\", \"LaBranche\", \"LaBrash\", \"LaCaille\", \"LaCasse\", \"LaChapelle\", \"LaClair\", \"LaComb\", \"LaCoste\", \"LaCount\", \"LaCour\", \"LaCroix\", \"LaFarlett\", \"LaFarlette\", \"LaFerry\", \"LaFlamme\", \"LaFollette\", \"LaForge\", \"LaFortune\", \"LaFoy\", \"LaFramboise\", \"LaFrance\", \"LaFuze\", \"LaGioia\", \"LaGrone\", \"LaLiberte\", \"LaLonde\", \"LaLone\", \"LaMaster\", \"LaMay\", \"LaMere\", \"LaMont\", \"LaMotte\", \"LaPeer\", \"LaPierre\", \"LaPlante\", \"LaPoint\", \"LaPointe\", \"LaPorte\", \"LaPrade\", \"LaRocca\", \"LaRochelle\", \"LaRose\", \"LaRue\", \"LaVallee\", \"LaVaque\", \"LaVeau\", \"LeBleu\", \"LeBoeuf\", \"LeBoiteaux\", \"LeBoyteulx\", \"LeCheminant\", \"LeClair\", \"LeClerc\", \"LeCompte\", \"LeCroy\", \"LeDuc\", \"LeFevbre\", \"LeFever\", \"LeFevre\", \"LeFlore\", \"LeGette\", \"LeGrand\", \"LeGrave\", \"LeGro\", \"LeGros\", \"LeJeune\", \"LeMaistre\", \"LeMaitre\", \"LeMaster\", \"LeMesurier\", \"LeMieux\", \"LeMoe\", \"LeMoigne\", \"LeMoine\", \"LeNeve\", \"LePage\", \"LeQuire\", \"LeQuyer\", \"LeRou\", \"LeRoy\", \"LeSuer\", \"LeSueur\", \"LeTardif\", \"LeVally\", \"LeVert\", \"LoMonaco\", \"Macabe\", \"Macaluso\", \"MacaTasney\", \"Macaulay\", \"Macchitelli\", \"Maccoone\", \"Maccurry\", \"Macdermattroe\", \"Macdiarmada\", \"Macelvaine\", \"Macey\", \"Macgraugh\", \"Machan\", \"Machann\", \"Machum\", \"Maciejewski\", \"Maciel\", \"Mackaben\", \"Mackall\", \"Mackartee\", \"Mackay\", \"Macken\", \"Mackert\", \"Mackey\", \"Mackie\", \"Mackin\", \"Mackins\", \"Macklin\", \"Macko\", \"Macksey\", \"Mackwilliams\", \"Maclean\", \"Maclinden\", \"Macomb\", \"Macomber\", \"Macon\", \"Macoombs\", \"Macraw\", \"Macumber\", \"Macurdy\", \"Macwilliams\", \"MaGuinness\", \"MakCubyn\", \"MakCumby\", \"Mcelvany\", \"Mcsherry\", \"Op den Dyck\", \"Op den Graeff\", \"regory\", \"StElmo\", \"StGelais\", \"StJacques\", \"te Boveldt\", \"VanAernam\", \"VanAken\", \"VanAlstine\", \"VanAmersfoort\", \"VanAntwerp\", \"VanArlem\", \"VanArnam\", \"VanArnem\", \"VanArnhem\", \"VanArnon\", \"VanArsdale\", \"VanArsdalen\", \"VanArsdol\", \"vanAssema\", \"vanAsten\", \"VanAuken\", \"VanAwman\", \"VanBaucom\", \"VanBebber\", \"VanBeber\", \"VanBenschoten\", \"VanBibber\", \"VanBilliard\", \"vanBlare\", \"vanBlaricom\", \"VanBuren\", \"VanBuskirk\", \"VanCamp\", \"VanCampen\", \"VanCleave\", \"VanCleef\", \"VanCleve\", \"VanCouwenhoven\", \"VanCovenhoven\", \"VanCowenhoven\", \"VanCuren\", \"VanDalsem\", \"VanDam\", \"VanDe Poel\", \"vanden Dijkgraaf\", \"vanden Kommer\", \"VanDer Aar\", \"vander Gouwe\", \"VanDer Honing\", \"VanDer Hooning\", \"vander Horst\", \"vander Kroft\", \"vander Krogt\", \"VanDer Meer\", \"vander Meulen\", \"vander Putte\", \"vander Schooren\", \"VanDer Veen\", \"VanDer Ven\", \"VanDer Wal\", \"VanDer Weide\", \"VanDer Willigen\", \"vander Wulp\", \"vander Zanden\", \"vander Zwan\", \"VanDer Zweep\", \"VanDeren\", \"VanDerlaan\", \"VanDerveer\", \"VanderWoude\", \"VanDeursen\", \"VanDeusen\", \"vanDijk\", \"VanDoren\", \"VanDorn\", \"VanDort\", \"VanDruff\", \"VanDryer\", \"VanDusen\", \"VanDuzee\", \"VanDuzen\", \"VanDuzer\", \"VanDyck\", \"VanDyke\", \"VanEman\", \"VanEmmen\", \"vanEmmerik\", \"VanEngen\", \"vanErp\", \"vanEssen\", \"VanFleet\", \"VanGalder\", \"VanGelder\", \"vanGerrevink\", \"VanGog\", \"vanGogh\", \"VanGorder\", \"VanGordon\", \"VanGroningen\", \"VanGuilder\", \"VanGundy\", \"VanHaaften\", \"VanHaute\", \"VanHees\", \"vanHeugten\", \"VanHise\", \"VanHoeck\", \"VanHoek\", \"VanHook\", \"vanHoorn\", \"VanHoornbeeck\", \"VanHoose\", \"VanHooser\", \"VanHorn\", \"VanHorne\", \"VanHouten\", \"VanHoye\", \"VanHuijstee\", \"VanHuss\", \"VanImmon\", \"VanKersschaever\", \"VanKeuren\", \"VanKleeck\", \"VanKoughnet\", \"VanKouwenhoven\", \"VanKuykendaal\", \"vanLeeuwen\", \"vanLent\", \"vanLet\", \"VanLeuven\", \"vanLingen\", \"VanLoozen\", \"VanLopik\", \"VanLuven\", \"vanMaasdijk\", \"VanMele\", \"VanMeter\", \"vanMoorsel\", \"VanMoorst\", \"VanMossevelde\", \"VanNaarden\", \"VanNamen\", \"VanNemon\", \"VanNess\", \"VanNest\", \"VanNimmen\", \"vanNobelen\", \"VanNorman\", \"VanNormon\", \"VanNostrunt\", \"VanNote\", \"VanOker\", \"vanOosten\", \"VanOrden\", \"VanOrder\", \"VanOrma\", \"VanOrman\", \"VanOrnum\", \"VanOstrander\", \"VanOvermeire\", \"VanPelt\", \"VanPool\", \"VanPoole\", \"VanPoorvliet\", \"VanPutten\", \"vanRee\", \"VanRhijn\", \"vanRijswijk\", \"VanRotmer\", \"VanSchaick\", \"vanSchelt\", \"VanSchoik\", \"VanSchoonhoven\", \"VanSciver\", \"VanScoy\", \"VanScoyoc\", \"vanSeters\", \"VanSickle\", \"VanSky\", \"VanSnellenberg\", \"vanStaveren\", \"VanStraten\", \"VanSuijdam\", \"VanTassel\", \"VanTassell\", \"VanTessel\", \"VanTexel\", \"VanTuyl\", \"VanValckenburgh\", \"vanValen\", \"VanValkenburg\", \"VanVelsor\", \"VanVelzor\", \"VanVlack\", \"VanVleck\", \"VanVleckeren\", \"VanWaard\", \"VanWart\", \"VanWassenhove\", \"VanWinkle\", \"VanWoggelum\", \"vanWordragen\", \"VanWormer\", \"VanZuidam\", \"VanZuijdam\", \"VonAdenbach\", \"vonAllmen\", \"vonBardeleben\", \"vonBerckefeldt\", \"VonBergen\", \"vonBreyman\", \"VonCannon\", \"vonFreymann\", \"vonHeimburg\", \"VonHuben\", \"vonKramer\", \"vonKruchenburg\", \"vonPostel\", \"VonRohr\", \"VonRohrbach\", \"VonSass\", \"VonSasse\", \"vonSchlotte\", \"VonSchneider\", \"VonSeldern\", \"VonSpringer\", \"VonVeyelmann\", \"VonZweidorff\");\n      surnames = surnames.concat(suffixes); //Append suffixes array to the end of surnames\n      var mc = /^Mc(\\w)(?=\\w)/i; //Regexp for \"Mc\"\n      var mac = /^Mac(\\w)(?=\\w)/i; //Regexp for \"Mac\"\n      var hyphen_index = [];\n      var hyphen = false;\n      while (name.indexOf('-') > -1) {\n        //Loops to record positions of hyphens (to put them back later) and convert the hyphen to a space (to break up name into individual words)\n        var index = name.indexOf('-');\n        if (index === 0) {\n          //If name begins with hypen, just remove the first character from the name and loop again\n          name = name.substr(1);\n          continue;\n        }\n        hyphen_index.push(index); //Record hyphen position\n        name = name.substring(0, index) + ' ' + name.substr(index + 1); //Change hyphen to a space\n        hyphen = true;\n      }\n      var names = name.split(' '); //Put individual words in name into an array\n      for (var i = 0; i < names.length; i++)\n      //Loop through words in name if they are all CAPS, make them all lowercase\n      if (upperCase.test(names[i])) names[i] = names[i].toLowerCase();\n      for (i = 0; i < names.length; i++)\n      //Loop through words in name and capitalize the first letter\n      names[i] = names[i].charAt(0).toUpperCase() + names[i].substr(1); //Change word to capitalized version\n      for (i = 0; i < names.length; i++) {\n        //Loop through words in name and check for \"mcx\" and \"macx\"\n        if (mc.test(names[i]))\n          //Look for \"Mc\" start of name word\n          names[i] = \"Mc\" + names[i].charAt(2).toUpperCase() + names[i].substr(3); //Change word to capitalized version\n        if (mac.test(names[i]))\n          //Look for \"Mac\" start of name word\n          names[i] = \"Mac\" + names[i].charAt(3).toUpperCase() + names[i].substr(4); //Change word to capitalized version\n      }\n\n      name = names.join(' '); //Join words of name back together\n      if (hyphen)\n        //Add hyphens back if they originally existed\n        for (i = 0; i < hyphen_index.length; i++)\n        //Cycle through hyphen index\n        name = name.substr(0, hyphen_index[i]) + '-' + name.substr(hyphen_index[i] + 1); //Replace positions in name from hyphen index with hyphens\n      var apos = name.indexOf(\"'\");\n      if (apos > -1) {\n        var ucApos = name.substr(apos + 1, 1).toUpperCase();\n        name = name.substr(0, apos + 1) + ucApos + name.substr(apos + 2);\n      }\n      name = name.replace(/ De /gi, ' de '); //Replace ' De ' with ' de '\n      name = name.replace(/ Dit /gi, ' dit '); //Replace ' Dit ' with ' dit '\n      name = name.replace(/ Van /gi, ' van '); //Replace ' Van ' with ' van '\n      var lcName = name.toLowerCase(); //Copy of name in lower-case\n      for (i = 0; i < surnames.length; i++) {\n        var pos = lcName.indexOf(surnames[i].toLowerCase());\n        if (pos > -1) {\n          if ((pos === 0 || pos > 0 && name.charAt(pos - 1) == ' ') && (name.length == pos + surnames[i].length || name.charAt(pos + surnames[i].length) == ' ')) name = name.substring(0, pos) + surnames[i] + name.substr(pos + surnames[i].length);\n        }\n      }\n      return name;\n    },\n    format2Places(amount) {\n      const formatter = new Intl.NumberFormat('en-US', {\n        // These options are needed to round to whole numbers if that's what you want.\n        minimumFractionDigits: 2,\n        // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n        maximumFractionDigits: 2 // (causes 2500.99 to be printed as $2,501)\n      });\n\n      return formatter.format(amount);\n    },\n    formatInt(amount) {\n      const formatter = new Intl.NumberFormat('en-US', {\n        // These options are needed to round to whole numbers if that's what you want.\n        minimumFractionDigits: 0,\n        // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n        maximumFractionDigits: 0 // (causes 2500.99 to be printed as $2,501)\n      });\n\n      return formatter.format(amount);\n    },\n    formatCurrency(amount) {\n      const formatter = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD',\n        // These options are needed to round to whole numbers if that's what you want.\n        minimumFractionDigits: 0,\n        // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n        maximumFractionDigits: 0 // (causes 2500.99 to be printed as $2,501)\n      });\n\n      return formatter.format(amount);\n    },\n    str_pad_left(string, pad, length) {\n      return (new Array(length + 1).join(pad) + string).slice(-length);\n    },\n    highlightDaysSincePP(value, key, item) {\n      if (item.daysSinceLastRace > 180) return \"gt180\";\n      if (item.daysSinceLastRace > 90) return \"gt90\";\n      if (item.daysSinceLastRace > 45) return \"gt45\";\n    },\n    highlightFinish(value, key, item) {\n      if (item.finishPosition == \"1\") return \"greenHighlight\";\n      if (item.finishPosition == \"2\" || item.finishPosition == \"3\") return \"lightGreenHighlight\";\n    },\n    highlightBeatenFavorite(value, key, item) {\n      if (item.favoriteFlag && item.finishPosition != \"1\") return \"yellowHighlight\";\n    },\n    highlightPurseShift(value, key, item) {\n      if (item.purse >= this.race.purse + 20000) return \"greenHighlight\";\n      if (item.purse > this.race.purse) return \"lightGreenHighlight\";\n      if (item.purse == this.race.purse) return \"\";\n      if (item.purse < this.race.purse - 10000) return \"yellowHighlight\";\n      if (item.purse < this.race.purse - 20000) return \"lightRedHighlight\";\n      if (item.purse < this.race.purse - 30000) return \"redHighlight\";\n    },\n    highlightSpeedInRange(value, key, item) {\n      if (item.brisspeedRating >= this.race.parSpeed) return \"greenHighlight\";\n      if (item.brisspeedRating >= this.race.parSpeed - 3) return \"lightGreenHighlight\";\n    },\n    highlightRaceStrength(value, key, item) {\n      if (item.raceStrength >= this.race.parSpeed - 2) return \"greenHighlight\";\n    },\n    highlightPace(value, key, item) {\n      if (item.e1 >= (this.race.furlongs < 8 ? this.race.parPace2F : this.race.parPace4F) - 2 && item.e2 >= (this.race.furlongs < 8 ? this.race.parPace4F : this.race.parPace6F) - 2 && item.paceFigureLate >= this.race.parLatePace - 2) return \"greenHighlight\";\n    },\n    highlightRaceShape(value, key, item) {\n      if (item.raceShapeFirstCall > 9 && item.raceShapeSecondCall > 9 && this.horse.runStyle == 'E') return 'yellowHighlight';\n      if (item.raceShapeFirstCall > 9 && item.raceShapeSecondCall > 9 && (this.horse.runStyle == 'P' || this.horse.runStyle == 'S')) return 'greenHighlight';\n      if (item.raceShapeFirstCall < -9 && item.raceShapeSecondCall < -9 && this.horse.runStyle == 'E') return 'greenHighlight';\n      if (item.raceShapeFirstCall < -9 && item.raceShapeSecondCall < -9 && (this.horse.runStyle == 'P' || this.horse.runStyle == 'S')) return 'yellowHighlight';\n    },\n    highlightRaceShape2(value, key, item) {\n      switch (item.raceShape) {\n        case \"FF\":\n          if (!isNaN(item.finishPosition) && item.finishPosition <= 3 || item.finishBeatenLengthsOnly < 2) return \"greenHighlight\";\n          return;\n        case \"SS\":\n          return \"text-info strong\";\n        case \"SF\":\n          if (item.finishPosition == \"1\" && (this.horse.runStyle == \"E\" || this.horse.runstyle == \"E/P\")) return \"yellowHighlight\";\n          if (item.finishPosition == \"1\" && (this.horse.runStyle == \"P\" || this.horse.runstyle == \"S\")) return \"greenHighlight\";\n          return;\n        case \"FS\":\n          if (item.finishPosition == \"1\" && (this.horse.runStyle == \"P\" || this.horse.runstyle == \"S\")) return \"yellowHighlight\";\n          return;\n      }\n    },\n    highlightFinalFraction(value, key, item) {\n      if (this.race.turfFlag && this.race.furlongs >= 8) {\n        var final;\n        var target;\n\n        // mile\n        if (Math.abs(item.furlongs) == 8 || Math.abs(item.distance) >= 1800 && Math.abs(item.distance) <= 1830 || Math.abs(item.furlongs) == 10 || Math.abs(item.furlongs) == 12) {\n          final = item.split3;\n          target = 23.5;\n        } else if (Math.abs(item.furlongs) == 8.5) {\n          final = item.split3;\n          target = 29.5;\n        } else if (Math.abs(item.furlongs) == 9 || Math.abs(item.furlongs) == 9.5 || Math.abs(item.furlongs) == 11) {\n          final = item.split2 + item.split3;\n          target = 35.5;\n        }\n        if (item.raceType.substring(0, 3) == \"MAID\") target += .4;\n        return final < target ? \"greenHighlight\" : \"\";\n      }\n    },\n    highlightShift(value) {\n      if (value < 0) return \"greenHighlight\";\n      if (value > 0) return \"yellowHighlight\";\n    },\n    highlightSimilarSurfDist(value, key, item) {\n      if (this.race.surface.indexOf(\"TURF\") > -1 && !this.race.offTheTurfFlag) {\n        if (item.surface.indexOf(\"TURF\") > -1 && (this.race.trackCondition == \"fm\" && item.trackCondition == \"fm\" || this.race.trackCondition != \"fm\" && [\"tf\", \"gd\", \"gf\", \"hd\", \"yl\", \"sf\", \"hy\", \"sl\"].indexOf(item.trackCondition) > -1) && (this.race.furlongs < 8 && item.furlongs < 8 || this.race.furlongs >= 8 && item.furlongs >= 8)) return \"blueHighlight\";\n      } else {\n        if ((item.surface.indexOf(\"TURF\") == -1 || item.offTheTurfFlag) && (this.race.trackCondition == \"ft\" && item.trackCondition == \"ft\" || this.race.trackCondition != \"ft\" && [\"gd\", \"hy\", \"my\", \"sl\", \"sy\", \"wf\"].indexOf(item.trackCondition) > -1) && (this.race.furlongs < 8 && item.furlongs < 8 || this.race.furlongs >= 8 && item.furlongs >= 8)) return \"blueHighlight\";\n      }\n    },\n    alsoInRace(nameToMatch, row) {\n      var names = _.pluck(this.race.horses, \"name\");\n      if (names.indexOf(nameToMatch) > -1 && nameToMatch != row.name) return \"alsoInRace\";\n    },\n    raceTypeCode(type) {\n      switch (type) {\n        case \"GRADE_1\":\n          return \"G1\";\n        case \"GRADE_2\":\n          return \"G2\";\n        case \"GRADE_3\":\n          return \"G3\";\n        case \"NON_GRADED\":\n          return \"N\";\n        case \"ALLOWANCE\":\n          return \"A\";\n        case \"STARTER_ALLOWANCE\":\n          return \"R\";\n        case \"STARTER_HANDICAP\":\n          return \"T\";\n        case \"CLAIMING\":\n          return \"C\";\n        case \"OPTIONAL_CLAIMING\":\n          return \"CO\";\n        case \"MAIDEN_SPECIAL_WEIGHT\":\n          return \"S\";\n        case \"MAIDEN_CLAIMING\":\n          return \"M\";\n        case \"ALLOWANCE_OPTIONAL_CLAIMING\":\n          return \"AO\";\n        case \"MAIDEN_OPTIONAL_CLAIMING\":\n          return \"MO\";\n        case \"OPTIONAL_CLAIMING_STAKES\":\n          return \"NO\";\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwJA;AAEA;AACA;AAEA;EACAA;EACAC;IACAC;IAAAC;IAAAC;IAAAC;EACA;EACAC;EACAC;IACA;MACAC,WACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAE;MAAA,GACA;QAAAH;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAE;MAAA,GACA;QAAAH;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAC;QAAAE;QAAAD;MAAA,GACA;QAAAH;QAAAC;MAAA,GACA;QAAAD;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAG;MAAA,GACA;QAAAH;QAAAC;MAAA,GACA;QAAAD;QAAAG;QAAAD;MAAA,GACA;QAAAF;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAH;QAAAE;QAAAD;QAAAE;MAAA,GACA;QAAAH;QAAAE;QAAAD;QAAAE;MAAA,GACA;QAAAH;QAAAC;QAAAC;QAAAG;QAAAF;MAAA,GACA;QAAAH;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAH;QAAAE;QAAAD;MAAA,GACA;QAAAD;QAAAE;QAAAD;MAAA,GACA;QAAAD;QAAAE;QAAAD;MAAA,GACA;QAAAD;QAAAE;QAAAD;MAAA,GACA;QAAAD;QAAAE;QAAAD;MAAA,GACA;QAAAD;QAAAE;QAAAD;MAAA,GACA;QAAAD;QAAAE;QAAAD;QAAAE;MAAA,GACA;QAAAH;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;QAAAE;MAAA,GACA;QAAAH;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA;IAEA;EACA;EACAK;IACA;MACA;QACA;UACAC;UACAC;UACAC;QACA;QACAC;MACA;QACAC;MAEA;IACA;IACAC;MACA;MACA;MAEA;MACA;MAEA;MAEA;IACA;IACAC;MACA;QACA;UACA;QACA;UACA;QACA;UACA;QACA;UACA;MAAA;IAEA;IACAC;MACA;MACA;MACA;QACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACAC;MACA;MACA;MACA;MACA;MACA;QAAA;QACA;QACA;UAAA;UACA1B;UACA;QACA;QACA2B;QACA3B;QACA4B;MACA;MACA;MACA;MAAA;MACA;MACA;MAAA;MACAC;MACA;QAAA;QACA;UAAA;UACAA;QACA;UAAA;UACAA;MACA;;MACA7B;MACA;QAAA;QACA;QAAA;QACAA;MACA;MACA;QACA;QACAA;MACA;MACAA;MACAA;MACAA;MACA;MACA;QACA;QACA;UACA;QACA;MACA;MACA;IACA;IACA8B;MACA;QAGA;QACAC;QAAA;QACAC;MACA;;MACA;IACA;IACAC;MACA;QAGA;QACAF;QAAA;QACAC;MACA;;MACA;IACA;IACAE;MACA;QACAC;QACAC;QAEA;QACAL;QAAA;QACAC;MACA;;MACA;IACA;IACAK;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA,2FACAzB,uFACAA,kDACA;IACA;IACA0B;MACA,mEACA;MACA,oEACA;MACA,qEACA;MACA,sEACA;IACA;IACAC;MACA;QACA;UACA;UACA;QACA;UACA;QACA;UACA;UACA;UACA;QACA;UACA;UACA;MAAA;IAEA;IACAC;MACA;QACA;QACA;;QAEA;QACA,IACAC,gCACAA,sEACAA,iCACAA,+BACA;UACAC;UACAC;QACA,WACAF,gCACA;UACAC;UACAC;QACA,WACAF,gCACAA,kCACAA,+BACA;UACAC;UACAC;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;QACA,IACAjC,sCACA,+LACA,+FACA;MACA;QACA,oEACA,mLACA,+FACA;MACA;IACA;IACAkC;MACA;MACA;IAEA;IACAC;MACA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;QACA;UAAA;MAAA;IAEA;EACA;AACA","names":["name","components","BIconCircleFill","BIconArrowDown","BIconArrowUp","BIconCaretUpFill","props","data","ppFields","key","label","title","tdClass","formatter","class","methods","url","method","baseURL","item","console","ppRowClass","fractionString","shortenName","ret","properize","surnames","hyphen_index","hyphen","names","format2Places","minimumFractionDigits","maximumFractionDigits","formatInt","formatCurrency","style","currency","str_pad_left","highlightDaysSincePP","highlightFinish","highlightBeatenFavorite","highlightPurseShift","highlightSpeedInRange","highlightRaceStrength","highlightPace","highlightRaceShape","highlightRaceShape2","highlightFinalFraction","Math","final","target","highlightShift","highlightSimilarSurfDist","alsoInRace","raceTypeCode"],"sourceRoot":"src/components","sources":["PastPerformanceView.vue"],"sourcesContent":["<template>\n    <b-table\n        v-if=\"horse.pastPerformances.length > 0\"\n        :items=\"horse.pastPerformances\"\n        :fields=\"ppFields\"\n        :tbody-tr-class=\"ppRowClass\"\n        @row-clicked=\"toggleIgnored\"\n    >\n        <template #head()=\"data\">\n            <span v-b-tooltip.hover :title=\"data.field.title\">{{ data.label }}</span>\n        </template>  \n        <template #cell(raceDateString)=\"row\">\n            {{row.item.raceDateString}}<sup>{{row.item.raceNumber}}</sup>\n        </template>\n        <template #cell(trackCode)=\"row\">\n            <span v-b-tooltip.hover :title=\"row.item.trackName\">{{ row.item.trackCode }}</span>\n        </template>       \n        <template #cell(dist)=\"row\">\n            <span v-if=\"row.item.distance<0\"><sup>*</sup></span>\n            <span v-if=\"Math.abs(row.item.miles)==1.5\">1&frac12;m</span>\n            <span v-else-if=\"Math.abs(row.item.distance)==1800\">1<sup>40</sup>m</span>\n            <span v-else-if=\"Math.abs(row.item.distance)==1830\">1<sup>70</sup>m</span>\n            <span v-else-if=\"Math.abs(row.item.miles)==1.375\">1&frac38;m</span>\n            <span v-else-if=\"Math.abs(row.item.miles)==1.25\">1&frac14;m</span>\n            <span v-else-if=\"Math.abs(row.item.miles)==1.125\">1&frac18;m</span>\n            <span v-else-if=\"Math.abs(row.item.miles)==1.0625\">1<sup>1</sup>&frasl;<sub>16</sub>m</span>\n            <span v-else-if=\"Math.abs(row.item.miles)==1.1875\">1<sup>3</sup>&frasl;<sub>16</sub>m</span>\n            <span v-else-if=\"Math.abs(row.item.miles)==1.3125\">1<sup>5</sup>&frasl;<sub>16</sub>m</span>\n            <span v-else-if=\"Math.abs(row.item.miles)==1.4375\">1<sup>7</sup>&frasl;<sub>16</sub>m</span>\n            <span v-else-if=\"Math.abs(row.item.miles)==1\">1m</span>\n            <span v-else-if=\"Math.abs(row.item.furlongs)==4.5\">4&frac12;f</span>\n            <span v-else-if=\"Math.abs(row.item.furlongs)==5.5\">5&frac12;f</span>\n            <span v-else-if=\"Math.abs(row.item.furlongs)==6.5\">6&frac12;f</span>\n            <span v-else-if=\"Math.abs(row.item.furlongs)==7.5\">7&frac12;f</span>\n            <span v-else-if=\"Math.abs(row.item.miles) > 1.47 && Math.abs(row.item.miles) < 1.52\"><sup>*</sup>1&frac12;m</span>\n            <span v-else-if=\"Math.abs(row.item.miles) > 1.22 && Math.abs(row.item.miles) < 1.27\"><sup>*</sup>1&frac14;m</span>\n            <span v-else>{{Math.abs(row.item.furlongs)}}f</span>\n        </template>\n        <template #cell(surface)=\"row\">\n            <span v-if=\"row.item.surface == 'INNER_DIRT'\"><b-badge variant=\"secondary\"><b-icon-circle-fill></b-icon-circle-fill></b-badge></span>\n            <span v-if=\"row.item.surface == 'TURF'\"><b-badge pill variant=\"secondary\">&nbsp;T&nbsp;</b-badge></span>\n            <span v-if=\"row.item.surface == 'INNER_TURF'\"><b-badge variant=\"secondary\">&nbsp;T&nbsp;</b-badge></span>\n            <span v-if=\"row.item.allWeatherSurfaceFlag == 'A'\"><b-badge pill variant=\"secondary\">&nbsp;A&nbsp;</b-badge></span>\n            <span v-if=\"row.item.offTheTurfFlag\"><b-badge pill variant=\"secondary\">&nbsp;X&nbsp;</b-badge></span>\n        </template>\n        <template #cell(trainerAndClaimFlag)=\"row\">\n            <b-badge pill v-if=\"row.item.claimedCode != 'c' && row.item.claimingPrice > 0\" variant=\"danger\">C</b-badge>\n            <b-badge pill v-if=\"row.item.claimedCode == 'c'\" variant=\"success\" v-b-tooltip.hover :title=\"row.item.extraCommentLine\">C</b-badge>\n            <b-badge pill v-if=\"row.item.trainerChangeDate\" variant=\"success\"  v-b-tooltip.hover :title=\"'Prev Trnr: ' + row.item.trainerChangeStarts \n            + '  ' + row.item.trainerChangeWins + '-' + row.item.trainerChangePlaces + '-' + row.item.trainerChangeShows + '  ' + formatInt(row.item.trainerChangeWins / row.item.trainerChangeStarts * 100) + '%'\">T</b-badge>\n             {{shortenName(row.item.trainer)}}\n        </template>\n        <template #cell(fraction1)=\"row\">\n            <span v-if=\"row.item.fraction1 != 0\" v-b-tooltip.hover :title=\"'LDR: ' + Math.floor(row.item.fraction1 / 60) + ':' + format2Places(row.item.fraction1 - Math.floor(row.item.fraction1 / 60) * 60)\">\n            {{format2Places(row.item.calcFraction1)}}</span><br>\n        </template>\t\t\t\t\t\t\t\t\t\n        <template #cell(fraction2)=\"row\">\n            <span v-if=\"row.item.fraction2 != 0\" v-b-tooltip.hover :title=\"Math.floor(row.item.calcFraction2 / 60) + ':' + str_pad_left(Math.floor(row.item.calcFraction2 - Math.floor(row.item.calcFraction2 / 60) * 60),'0',2) + '.' + ((row.item.calcFraction2 - Math.floor(row.item.calcFraction2)) * 100).toFixed(0)\n            + ' (LDR : '\n            + Math.floor(row.item.fraction2 / 60) + ':' +  str_pad_left(Math.floor(row.item.fraction2 - Math.floor(row.item.fraction2 / 60) * 60),'0',2) + '.' + str_pad_left(((row.item.fraction2 - Math.floor(row.item.fraction2)) * 100).toFixed(0),'0',2) + ')'\">\n            {{format2Places(row.item.split1)}}</span>\n        </template>\t\t\t\t\t\t\t\t\t\n        <template #cell(fraction3)=\"row\">\n            <span v-if=\"row.item.calcFraction3 != 0\" v-b-tooltip.hover :title=\"Math.floor(row.item.calcFraction3 / 60) + ':' + str_pad_left(Math.floor(row.item.calcFraction3 - Math.floor(row.item.calcFraction3 / 60) * 60),'0',2) + '.' + ((row.item.calcFraction3 - Math.floor(row.item.calcFraction3)) * 100).toFixed(0)\n            + ' (LDR : '\n            + Math.floor(row.item.fraction3 / 60) + ':' +  str_pad_left(Math.floor(row.item.fraction3 - Math.floor(row.item.fraction3 / 60) * 60),'0',2) + '.' + str_pad_left(((row.item.fraction3 - Math.floor(row.item.fraction3)) * 100).toFixed(0),'0',2) + ')'\">\n            {{format2Places(row.item.split2)}}</span>\n        </template>\n        <template #cell(finalTime)=\"row\">\n            <span v-b-tooltip.hover :title=\"Math.floor(row.item.calcFinalTime / 60) + ':' + str_pad_left(Math.floor(row.item.calcFinalTime - Math.floor(row.item.calcFinalTime / 60) * 60),'0',2) + '.' + ((row.item.calcFinalTime - Math.floor(row.item.calcFinalTime)) * 100).toFixed(0)\n            + ' (LDR : '\n            + Math.floor(row.item.finalTime / 60) + ':' +  str_pad_left(Math.floor(row.item.finalTime - Math.floor(row.item.finalTime / 60) * 60),'0',2) + '.' + str_pad_left(((row.item.finalTime - Math.floor(row.item.finalTime)) * 100).toFixed(0),'0',2) + ')'\">\n            {{format2Places(row.item.split3)}}</span>\n        </template>\n        <template #cell(ageRange)=\"row\">\n            <span v-if=\"row.item.ageRestriction == 'TWO_YEAR_OLDS'\">2</span>\n            <span v-else-if=\"row.item.ageRestriction == 'THREE_YEAR_OLDS'\">3</span>\n            <span v-else-if=\"row.item.ageRestriction == 'FOUR_YEAR_OLDS'\">3</span>\n            <span v-if=\"row.item.ageRestrictionRange == 'THAT_AGE_AND_UP'\"><b-icon-caret-up-fill></b-icon-caret-up-fill></span>\n        </template>\n        <template #cell(raceClassification)=\"row\">\n            <b-badge pill variant=\"info\" v-b-tooltip.hover :title=\"row.item.raceType\">{{raceTypeCode(row.item.raceType)}}</b-badge>&nbsp;\n            <span v-if=\"row.item.raceClassification.substring(0,1) == 's'\"><b-badge variant=\"secondary\">S</b-badge>&nbsp;{{row.item.raceClassification.substring(1)}}</span>\n            <span v-else-if=\"row.item.raceClassification.substring(0,1) == 'f'\"><b-badge variant=\"secondary\">F</b-badge>&nbsp;{{row.item.raceClassification.substring(1)}}</span>\n            <span v-else-if=\"row.item.raceClassification.substring(0,1) == 'r'\"><b-badge variant=\"secondary\">R</b-badge>&nbsp;{{row.item.raceClassification.substring(1)}}</span>\n            <span v-else>{{row.item.raceClassification}}</span>\n        </template>\n        <template #cell(raceStrength)=\"row\">\n            <span v-if=\"row.item.raceStrength != 0\">{{row.item.raceStrength}}</span>\n        </template>        \n        <template #cell(e1)=\"row\">\n            <span v-if=\"row.item.e1 != 0\">{{row.item.e1}}</span>\n        </template>        \n        <template #cell(e2)=\"row\">\n            <span v-if=\"row.item.e2 != 0\">{{row.item.e2}}/</span>\n        </template>\n        <template #cell(paceFigureLate)=\"row\">\n            <span v-if=\"row.item.paceFigureLate != 0\">{{row.item.paceFigureLate}}</span>\n        </template>        \n        <template #cell(raceShapeFirstCall)=\"row\">\n            <span v-if=\"row.item.e1 != 0\"><span v-if=\"row.item.raceShapeFirstCall > 0\">+</span>{{row.item.raceShapeFirstCall}}</span>\n        </template>\n        <template #cell(raceShapeSecondCall)=\"row\">\n            <span v-if=\"row.item.e2 != 0\"><span v-if=\"row.item.raceShapeSecondCall > 0\">+</span>{{row.item.raceShapeSecondCall}}</span>\n        </template>\t\t\n         <template #cell(brisspeedRating)=\"row\">\n            <span v-if=\"row.item.brisspeedRating != 0\">{{row.item.brisspeedRating}}</span><span v-if=\"row.item.speedPar != 0\"> / {{row.item.speedPar}}</span>\n        </template>\t\t\t\t\t\t\n        <template #cell(speedRating)=\"row\">\n            <span v-if=\"row.item.speedRating != 0\">\n                {{row.item.speedRating}}-{{row.item.trackVariant}}\n                <b-icon-arrow-up v-if=\"row.item.trackVariant<16\"></b-icon-arrow-up>\n                <b-icon-arrow-down v-if=\"row.item.trackVariant>19\"></b-icon-arrow-down>\n            </span>\n        </template>\t   \n         <template #cell(postPosition)=\"row\">\n            <span v-if=\"row.item.postPosition != 0\">{{row.item.postPosition}}</span>\n        </template>            \t\t\t\n        <template #cell(firstCallPosition)=\"row\">\n            <span v-if=\"row.item.firstCallPosition != 0\">{{row.item.firstCallPosition}}<sup>{{row.item.firstCallBeatenLengthsLeader.toFixed(2)}}</sup></span>\n        </template>\t\n        <template #cell(secondCallPosition)=\"row\">\n            <span v-if=\"row.item.secondCallPosition != 0\">{{row.item.secondCallPosition}}<sup>{{row.item.secondCallBeatenLengthsLeader.toFixed(2)}}</sup></span>\n        </template>\n        <template #cell(stretchPosition)=\"row\">\n           <span v-if=\"row.item.stretchPosition != 0\"> {{row.item.stretchPosition}}<sup>{{row.item.stretchBeatenLengthsLeader.toFixed(2)}}</sup></span>\n        </template>\t\n        <template #cell(finishPosition)=\"row\">\n            <span v-if=\"row.item.extraCommentLine.substring(0,1) == '(' || row.item.extraCommentLine == 'Dead heat'\" v-b-tooltip.hover :title=\"row.item.extraCommentLine\" class=\"text-danger\">*</span>{{row.item.finishPosition}}<sup>{{row.item.finishBeatenLengthsLeader.toFixed(2)}}</sup>\n        </template>\t\n        <template #cell(jockey)=\"row\">\t\n            {{shortenName(row.item.jockey)}}<sup>{{row.item.weight}}</sup>\n        </template>\t\t\n        <template #cell(medication)=\"row\">\t\n            {{row.item.equipment}}<span v-if=\"row.item.medication == 'LASIX'\">L</span>\n        </template>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n        <template #cell(odds)=\"row\">\t\n            <span v-if=\"row.item.favoriteFlag > 0\"><sup>*</sup></span>{{format2Places(row.item.odds)}}\n        </template>\t\n        <template #cell(finishers)=\"row\">\t\n            <span :class=\"alsoInRace(row.item.winnersName, row.item)\">{{row.item.winnersName}}</span><sup>{{row.item.winnersMargin.toFixed(2)}}</sup>\n            <span :class=\"alsoInRace(row.item.placeName, row.item)\">{{row.item.placeName}}</span><sup>{{row.item.placeMargin.toFixed(2)}}</sup>\n            <span :class=\"alsoInRace(row.item.showName, row.item)\">{{row.item.showName}}</span><sup>{{row.item.showMargin.toFixed(2)}}</sup>\n        </template>\t\t\n        <template #cell(tripComment)=\"row\">\t\n            <span v-b-tooltip.hover.left :title=\"row.item.extendedStartComment\">{{row.item.tripComment}}</span>\n        </template>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    </b-table>\n             \n</template>\n\n<script>\nimport { BIconCircleFill, BIconArrowDown, BIconArrowUp, BIconCaretUpFill } from 'bootstrap-vue'\n\nimport axios from 'axios'\nimport _ from 'underscore'\n\nexport default {\n    name: 'PastPerformanceView',\n    components: {\n\t\tBIconCircleFill, BIconArrowDown, BIconArrowUp, BIconCaretUpFill\n    },\n    props : ['horse', 'race'],\n    data () {\n\t\treturn {\n            ppFields: [\n\t\t\t\t{key: \"raceDateString\", label: \"DATE\"},\n\t\t\t\t{key: \"daysSinceLastRace\", label: \"LR\", title: \"Days Since Last Race\", tdClass: this.highlightDaysSincePP},\n\t\t\t\t{key: \"trackCode\", label: \"TRK\", title: \"Track\"},\n\t\t\t\t{key: \"surface\", label: \"\", tdClass: this.highlightSimilarSurfDist},\n\t\t\t\t{key: \"dist\", label: \"DIST\", title: \"Distance\", tdClass: this.highlightSimilarSurfDist},\n\t\t\t\t{key: \"trackCondition\", label: \"\", tdClass: this.highlightSimilarSurfDist},\n\t\t\t\t{key: \"fraction1\", label: \"1C\", title: \"1st Call Fraction\"},\n\t\t\t\t{key: \"fraction2\", label: \"2C\", title: \"2nd Call Fraction\"},\n\t\t\t\t{key: \"fraction3\", label: \"STR\", title: \"Stretch Call Fraction\"},\n\t\t\t\t{key: \"finalTime\", label: \"FIN\", title: \"Final Fraction\", tdClass: this.highlightFinalFraction},\n\t\t\t\t{key: \"raceStrength\", label: \"RS\", title: \"Race Strength (Winner's Speed Figure)\", formatter: this.format2Places, tdClass: this.highlightRaceStrength},\n                {key: \"ageRange\", label: \"\"},\n\t\t\t\t{key: \"raceClassification\", label: \"RACETYPE\", title: \"Race Classification\"},\n\t\t\t\t{key: \"purse\", tdClass: this.highlightPurseShift},\n                {key: \"trainerAndClaimFlag\", label: \"Trnr\"},\n\t\t\t\t{key: \"e1\", tdClass: this.highlightPace, title: \"1st Call Pace Rating (Start to 2F in sprints, 4F in routes)\"},\n\t\t\t\t{key: \"e2\", label: \"E2/\", title: \"2nd Call Pace Rating (Start to 4F in sprints, 6F in most routes)\", tdClass: this.highlightPace},\n\t\t\t\t{key: \"paceFigureLate\", label: \"LP\", title: \"Late Pace Rating (2nd Call to Finish)\", tdClass: this.highlightPace},\n\t\t\t\t{key: \"raceShapeFirstCall\", title: \"1st Call Race Shape (leader's pace compared to average)\", label: \"1c\", tdClass: this.highlightRaceShape},\n\t\t\t\t{key: \"raceShapeSecondCall\", title: \"2nd Call Race Shape (leader's pace compared to average)\", label: \"2c\", tdClass: this.highlightRaceShape},\n\t\t\t\t{key: \"brisspeedRating\", label: \"SPD\", title: \"BRIS Speed Rating and Race Par\", class: \"strong\", tdClass: this.highlightSpeedInRange},\n                {key: \"raceShape\", label: \"Shp\", title: \"Race Shape (1st Call Pace and Final Speed - e.g., FF is Fast/Fast, AS is Average/Slow)\", tdClass: this.highlightRaceShape2},\n                {key: \"speedRating\", title: \"DRF Speed Rating and Track Variant\", label: \"SR-TV\"},\n                {key: \"postPosition\", title: \"Post Position\", label: \"PP\"},\n\t\t\t\t{key: \"startCallPosition\", title: \"Start Call Position\", label: \"ST\"},\n\t\t\t\t{key: \"firstCallPosition\", title: \"First Call Position\", label: \"1C\"},\n\t\t\t\t{key: \"secondCallPosition\", title: \"Second Call Position\", label: \"2C\"},\n\t\t\t\t{key: \"stretchPosition\", title: \"Stretch Call Position\", label: \"STR\"},\n\t\t\t\t{key: \"finishPosition\", title: \"Finish Position\", label: \"FIN\", tdClass: this.highlightFinish},\n\t\t\t\t{key: \"jockey\", label: \"JOCKEY\"},\n\t\t\t\t{key: \"medication\", label: \"\"},\n\t\t\t\t{key: \"odds\", label: \"ODDS\", tdClass: this.highlightBeatenFavorite},\n\t\t\t\t{key: \"finishers\", label: \"Top Finishers\"},\n\t\t\t\t{key: \"tripComment\", label: \"Comment\"},\n\t\t\t\t{key: \"numberOfEntrants\", label: \"\"},\n\t\t\t],\n        }\n    },\n    methods:  {\n\t\tasync toggleIgnored(item) {\n            try {\n                await axios({\n                    url: 'toggleIgnored/' + this.race.raceNumber + '/' + this.horse.programNumber + '/' + item.raceDate[0] + '/' + item.raceDate[1] + '/' + item.raceDate[2],\n                    method: 'GET',\n                    baseURL: 'http://localhost:8080/jpp/rest/remote/'\n                });\n                item.ignore = !item.ignore;\n            } catch (err) {\n                console.log(err.response);\n                \n            }\n\t\t},\t\t\t\n\t\tppRowClass(item, type) {\n\t\t\tif (!item || type !== 'row') return;\n\t\t\tvar c = \"\";\n\t\t\t\n\t\t\tif (item.over365Days) c += \"diff365\";\n\t\t\tif (item.over90Days && !item.over365Days) c += \"diff90\";\n\t\t\t\n\t\t\tif (item.ignore) c += \" table-dark ignored\";\n\t\t\t\n\t\t\treturn c;\n\t\t},\n\t\tfractionString(decimal) {\n\t\t\tswitch(decimal) {\n\t\t\t\tcase 0.13:\n\t\t\t\t\treturn \"hd\";\n\t\t\t\tcase 0.25:\n\t\t\t\t\treturn \"&frac14;\";\n\t\t\t\tcase 0.5:\n\t\t\t\t\treturn \"&frac12;\";\n\t\t\t\tcase 0.75:\n\t\t\t\t\treturn \"&frac34;\";\n\t\t\t}\n\t\t},\n\t\tshortenName(value) {\n            var words = this.properize(value).split(\" \");\n            var ret = words[0];\n\t\t\tfor (var i = 1; i< words.length; i++) {\n                ret+=words[i].charAt(0);\n            }\n            return ret;\n\t\t},\n        properize (name) {\n            var upperCase = /^[A-Z]/; //Regexp for all UPPERCASE words\n            var suffixes = new Array(\"II\", \"(II)\", \"III\", \"(III)\", \"IV\", \"(IV)\", \"VI\", \"(VI)\", \"VII\", \"(VII)\", \"2nd\", \"(2nd)\", \"3rd\", \"(3rd)\", \"4th\", \"(4th)\", \"5th\", \"(5th)\");\n            var surnames = new Array(\"ApShaw\", \"d'Albini\", \"d'Aubigney\", \"d'Aubigne\", \"d'Autry\", \"d'Entremont\", \"d'Hurst\", \"D'ovidio\", \"da Graca\", \"DaSilva\", \"DeAnda\", \"deAnnethe\", \"deAubigne\", \"deAubigny\", \"DeBardelaben\", \"DeBardeleben\", \"DeBaugh\", \"deBeauford\", \"DeBerry\", \"deBethune\", \"DeBetuile\", \"DeBoard\", \"DeBoer\", \"DeBohun\", \"DeBord\", \"DeBose\", \"DeBrouwer\", \"DeBroux\", \"DeBruhl\", \"deBruijn\", \"deBrus\", \"deBruse\", \"deBrusse\", \"DeBruyne\", \"DeBusk\", \"DeCamp\", \"deCastilla\", \"DeCello\", \"deClare\", \"DeClark\", \"DeClerck\", \"DeCoste\", \"deCote\", \"DeCoudres\", \"DeCoursey\", \"DeCredico\", \"deCuire\", \"DeCuyre\", \"DeDominicios\", \"DeDuyster\", \"DeDuytscher\", \"DeDuytser\", \"deFiennes\", \"DeFord\", \"DeForest\", \"DeFrance\", \"DeFriece\", \"DeGarmo\", \"deGraaff\", \"DeGraff\", \"DeGraffenreid\", \"DeGraw\", \"DeGrenier\", \"DeGroats\", \"DeGroft\", \"DeGrote\", \"DeHaan\", \"DeHaas\", \"DeHaddeclive\", \"deHannethe\", \"DeHatclyf\", \"DeHaven\", \"DeHeer\", \"DeJager\", \"DeJarnette\", \"DeJean\", \"DeJong\", \"deJonge\", \"deKemmeter\", \"deKirketon\", \"DeKroon\", \"deKype\", \"del-Rosario\", \"dela Chamotte\", \"DeLa Cuadra\", \"DeLa Force\", \"dela Fountaine\", \"dela Grena\", \"dela Place\", \"DeLa Ward\", \"DeLaci\", \"DeLacy\", \"DeLaet\", \"DeLalonde\", \"DelAmarre\", \"DeLancey\", \"DeLascy\", \"DelAshmutt\", \"DeLassy\", \"DeLattre\", \"DeLaughter\", \"DeLay\", \"deLessine\", \"DelGado\", \"DelGaudio\", \"DeLiberti\", \"DeLoache\", \"DeLoatch\", \"DeLoch\", \"DeLockwood\", \"DeLong\", \"DeLozier\", \"DeLuca\", \"DeLucenay\", \"deLucy\", \"DeMars\", \"DeMartino\", \"deMaule\", \"DeMello\", \"DeMinck\", \"DeMink\", \"DeMoree\", \"DeMoss\", \"DeMott\", \"DeMuynck\", \"deNiet\", \"DeNure\", \"DePalma\", \"DePasquale\", \"dePender\", \"dePercy\", \"DePoe\", \"DePriest\", \"DePu\", \"DePui\", \"DePuis\", \"DeReeper\", \"deRochette\", \"deRose\", \"DeRossett\", \"DeRover\", \"deRuggele\", \"deRuggle\", \"DeRuyter\", \"deSaint-Sauveur\", \"DeSantis\", \"desCuirs\", \"DeSentis\", \"DeShane\", \"DeSilva\", \"DesJardins\", \"DesMarest\", \"deSoleure\", \"DeSoto\", \"DeSpain\", \"DeStefano\", \"deSwaert\", \"deSwart\", \"DeVall\", \"DeVane\", \"DeVasher\", \"DeVasier\", \"DeVaughan\", \"DeVaughn\", \"DeVault\", \"DeVeau\", \"DeVeault\", \"deVilleneuve\", \"DeVilliers\", \"DeVinney\", \"DeVito\", \"deVogel\", \"DeVolder\", \"DeVolld\", \"DeVore\", \"deVos\", \"DeVries\", \"deVries\", \"DeWall\", \"DeWaller\", \"DeWalt\", \"deWashington\", \"deWerly\", \"deWessyngton\", \"DeWet\", \"deWinter\", \"DeWitt\", \"DeWolf\", \"DeWolfe\", \"DeWolff\", \"DeWoody\", \"DeYager\", \"DeYarmett\", \"DeYoung\", \"DiCicco\", \"DiCredico\", \"DiFillippi\", \"DiGiacomo\", \"DiMarco\", \"DiMeo\", \"DiMonte\", \"DiNonno\", \"DiPietro\", \"diPilato\", \"DiPrima\", \"DiSalvo\", \"du Bosc\", \"du Hurst\", \"DuFort\", \"DuMars\", \"DuPre\", \"DuPue\", \"DuPuy\", \"FitzUryan\", \"kummel\", \"LaBarge\", \"LaBarr\", \"LaBauve\", \"LaBean\", \"LaBelle\", \"LaBerteaux\", \"LaBine\", \"LaBonte\", \"LaBorde\", \"LaBounty\", \"LaBranche\", \"LaBrash\", \"LaCaille\", \"LaCasse\", \"LaChapelle\", \"LaClair\", \"LaComb\", \"LaCoste\", \"LaCount\", \"LaCour\", \"LaCroix\", \"LaFarlett\", \"LaFarlette\", \"LaFerry\", \"LaFlamme\", \"LaFollette\", \"LaForge\", \"LaFortune\", \"LaFoy\", \"LaFramboise\", \"LaFrance\", \"LaFuze\", \"LaGioia\", \"LaGrone\", \"LaLiberte\", \"LaLonde\", \"LaLone\", \"LaMaster\", \"LaMay\", \"LaMere\", \"LaMont\", \"LaMotte\", \"LaPeer\", \"LaPierre\", \"LaPlante\", \"LaPoint\", \"LaPointe\", \"LaPorte\", \"LaPrade\", \"LaRocca\", \"LaRochelle\", \"LaRose\", \"LaRue\", \"LaVallee\", \"LaVaque\", \"LaVeau\", \"LeBleu\", \"LeBoeuf\", \"LeBoiteaux\", \"LeBoyteulx\", \"LeCheminant\", \"LeClair\", \"LeClerc\", \"LeCompte\", \"LeCroy\", \"LeDuc\", \"LeFevbre\", \"LeFever\", \"LeFevre\", \"LeFlore\", \"LeGette\", \"LeGrand\", \"LeGrave\", \"LeGro\", \"LeGros\", \"LeJeune\", \"LeMaistre\", \"LeMaitre\", \"LeMaster\", \"LeMesurier\", \"LeMieux\", \"LeMoe\", \"LeMoigne\", \"LeMoine\", \"LeNeve\", \"LePage\", \"LeQuire\", \"LeQuyer\", \"LeRou\", \"LeRoy\", \"LeSuer\", \"LeSueur\", \"LeTardif\", \"LeVally\", \"LeVert\", \"LoMonaco\", \"Macabe\", \"Macaluso\", \"MacaTasney\", \"Macaulay\", \"Macchitelli\", \"Maccoone\", \"Maccurry\", \"Macdermattroe\", \"Macdiarmada\", \"Macelvaine\", \"Macey\", \"Macgraugh\", \"Machan\", \"Machann\", \"Machum\", \"Maciejewski\", \"Maciel\", \"Mackaben\", \"Mackall\", \"Mackartee\", \"Mackay\", \"Macken\", \"Mackert\", \"Mackey\", \"Mackie\", \"Mackin\", \"Mackins\", \"Macklin\", \"Macko\", \"Macksey\", \"Mackwilliams\", \"Maclean\", \"Maclinden\", \"Macomb\", \"Macomber\", \"Macon\", \"Macoombs\", \"Macraw\", \"Macumber\", \"Macurdy\", \"Macwilliams\", \"MaGuinness\", \"MakCubyn\", \"MakCumby\", \"Mcelvany\", \"Mcsherry\", \"Op den Dyck\", \"Op den Graeff\", \"regory\", \"StElmo\", \"StGelais\", \"StJacques\", \"te Boveldt\", \"VanAernam\", \"VanAken\", \"VanAlstine\", \"VanAmersfoort\", \"VanAntwerp\", \"VanArlem\", \"VanArnam\", \"VanArnem\", \"VanArnhem\", \"VanArnon\", \"VanArsdale\", \"VanArsdalen\", \"VanArsdol\", \"vanAssema\", \"vanAsten\", \"VanAuken\", \"VanAwman\", \"VanBaucom\", \"VanBebber\", \"VanBeber\", \"VanBenschoten\", \"VanBibber\", \"VanBilliard\", \"vanBlare\", \"vanBlaricom\", \"VanBuren\", \"VanBuskirk\", \"VanCamp\", \"VanCampen\", \"VanCleave\", \"VanCleef\", \"VanCleve\", \"VanCouwenhoven\", \"VanCovenhoven\", \"VanCowenhoven\", \"VanCuren\", \"VanDalsem\", \"VanDam\", \"VanDe Poel\", \"vanden Dijkgraaf\", \"vanden Kommer\", \"VanDer Aar\", \"vander Gouwe\", \"VanDer Honing\", \"VanDer Hooning\", \"vander Horst\", \"vander Kroft\", \"vander Krogt\", \"VanDer Meer\", \"vander Meulen\", \"vander Putte\", \"vander Schooren\", \"VanDer Veen\", \"VanDer Ven\", \"VanDer Wal\", \"VanDer Weide\", \"VanDer Willigen\", \"vander Wulp\", \"vander Zanden\", \"vander Zwan\", \"VanDer Zweep\", \"VanDeren\", \"VanDerlaan\", \"VanDerveer\", \"VanderWoude\", \"VanDeursen\", \"VanDeusen\", \"vanDijk\", \"VanDoren\", \"VanDorn\", \"VanDort\", \"VanDruff\", \"VanDryer\", \"VanDusen\", \"VanDuzee\", \"VanDuzen\", \"VanDuzer\", \"VanDyck\", \"VanDyke\", \"VanEman\", \"VanEmmen\", \"vanEmmerik\", \"VanEngen\", \"vanErp\", \"vanEssen\", \"VanFleet\", \"VanGalder\", \"VanGelder\", \"vanGerrevink\", \"VanGog\", \"vanGogh\", \"VanGorder\", \"VanGordon\", \"VanGroningen\", \"VanGuilder\", \"VanGundy\", \"VanHaaften\", \"VanHaute\", \"VanHees\", \"vanHeugten\", \"VanHise\", \"VanHoeck\", \"VanHoek\", \"VanHook\", \"vanHoorn\", \"VanHoornbeeck\", \"VanHoose\", \"VanHooser\", \"VanHorn\", \"VanHorne\", \"VanHouten\", \"VanHoye\", \"VanHuijstee\", \"VanHuss\", \"VanImmon\", \"VanKersschaever\", \"VanKeuren\", \"VanKleeck\", \"VanKoughnet\", \"VanKouwenhoven\", \"VanKuykendaal\", \"vanLeeuwen\", \"vanLent\", \"vanLet\", \"VanLeuven\", \"vanLingen\", \"VanLoozen\", \"VanLopik\", \"VanLuven\", \"vanMaasdijk\", \"VanMele\", \"VanMeter\", \"vanMoorsel\", \"VanMoorst\", \"VanMossevelde\", \"VanNaarden\", \"VanNamen\", \"VanNemon\", \"VanNess\", \"VanNest\", \"VanNimmen\", \"vanNobelen\", \"VanNorman\", \"VanNormon\", \"VanNostrunt\", \"VanNote\", \"VanOker\", \"vanOosten\", \"VanOrden\", \"VanOrder\", \"VanOrma\", \"VanOrman\", \"VanOrnum\", \"VanOstrander\", \"VanOvermeire\", \"VanPelt\", \"VanPool\", \"VanPoole\", \"VanPoorvliet\", \"VanPutten\", \"vanRee\", \"VanRhijn\", \"vanRijswijk\", \"VanRotmer\", \"VanSchaick\", \"vanSchelt\", \"VanSchoik\", \"VanSchoonhoven\", \"VanSciver\", \"VanScoy\", \"VanScoyoc\", \"vanSeters\", \"VanSickle\", \"VanSky\", \"VanSnellenberg\", \"vanStaveren\", \"VanStraten\", \"VanSuijdam\", \"VanTassel\", \"VanTassell\", \"VanTessel\", \"VanTexel\", \"VanTuyl\", \"VanValckenburgh\", \"vanValen\", \"VanValkenburg\", \"VanVelsor\", \"VanVelzor\", \"VanVlack\", \"VanVleck\", \"VanVleckeren\", \"VanWaard\", \"VanWart\", \"VanWassenhove\", \"VanWinkle\", \"VanWoggelum\", \"vanWordragen\", \"VanWormer\", \"VanZuidam\", \"VanZuijdam\", \"VonAdenbach\", \"vonAllmen\", \"vonBardeleben\", \"vonBerckefeldt\", \"VonBergen\", \"vonBreyman\", \"VonCannon\", \"vonFreymann\", \"vonHeimburg\", \"VonHuben\", \"vonKramer\", \"vonKruchenburg\", \"vonPostel\", \"VonRohr\", \"VonRohrbach\", \"VonSass\", \"VonSasse\", \"vonSchlotte\", \"VonSchneider\", \"VonSeldern\", \"VonSpringer\", \"VonVeyelmann\", \"VonZweidorff\");\n            surnames = surnames.concat(suffixes); //Append suffixes array to the end of surnames\n            var mc = /^Mc(\\w)(?=\\w)/i; //Regexp for \"Mc\"\n            var mac = /^Mac(\\w)(?=\\w)/i; //Regexp for \"Mac\"\n            var hyphen_index = [];\n            var hyphen = false;\n            while (name.indexOf('-') > -1) { //Loops to record positions of hyphens (to put them back later) and convert the hyphen to a space (to break up name into individual words)\n                var index = name.indexOf('-');\n                if (index === 0) { //If name begins with hypen, just remove the first character from the name and loop again\n                    name = name.substr(1);\n                    continue;\n                }\n                hyphen_index.push(index); //Record hyphen position\n                name = name.substring(0, index) + ' ' + name.substr(index + 1); //Change hyphen to a space\n                hyphen = true;\n            }\n            var names = name.split(' '); //Put individual words in name into an array\n            for (var i = 0; i < names.length; i++) //Loop through words in name if they are all CAPS, make them all lowercase\n            if (upperCase.test(names[i])) names[i] = names[i].toLowerCase();\n            for (i = 0; i < names.length; i++) //Loop through words in name and capitalize the first letter\n            names[i] = names[i].charAt(0).toUpperCase() + names[i].substr(1); //Change word to capitalized version\n            for (i = 0; i < names.length; i++) { //Loop through words in name and check for \"mcx\" and \"macx\"\n                if (mc.test(names[i])) //Look for \"Mc\" start of name word\n                names[i] = \"Mc\" + names[i].charAt(2).toUpperCase() + names[i].substr(3); //Change word to capitalized version\n                if (mac.test(names[i])) //Look for \"Mac\" start of name word\n                names[i] = \"Mac\" + names[i].charAt(3).toUpperCase() + names[i].substr(4); //Change word to capitalized version\n            }\n            name = names.join(' '); //Join words of name back together\n            if (hyphen) //Add hyphens back if they originally existed\n            for (i = 0; i < hyphen_index.length; i++) //Cycle through hyphen index\n            name = name.substr(0, hyphen_index[i]) + '-' + name.substr(hyphen_index[i] + 1); //Replace positions in name from hyphen index with hyphens\n            var apos = name.indexOf(\"'\");\n            if (apos > -1) {\n                var ucApos = name.substr(apos + 1, 1).toUpperCase();\n                name = name.substr(0, apos + 1) + ucApos + name.substr(apos + 2);\n            }\n            name = name.replace(/ De /gi, ' de '); //Replace ' De ' with ' de '\n            name = name.replace(/ Dit /gi, ' dit '); //Replace ' Dit ' with ' dit '\n            name = name.replace(/ Van /gi, ' van '); //Replace ' Van ' with ' van '\n            var lcName = name.toLowerCase(); //Copy of name in lower-case\n            for (i = 0; i < surnames.length; i++) {\n                var pos = lcName.indexOf(surnames[i].toLowerCase());\n                if (pos > -1) {\n                    if (((pos === 0) || (pos > 0 && name.charAt(pos - 1) == ' ')) && ((name.length == pos + surnames[i].length) || (name.charAt(pos + surnames[i].length) == ' '))) name = name.substring(0, pos) + surnames[i] + name.substr(pos + surnames[i].length);\n                }\n            }\n            return name;\t\n        },\n\t\tformat2Places(amount) {\n\t\t\tconst formatter = new Intl.NumberFormat('en-US', {\n\n\n\t\t\t\t// These options are needed to round to whole numbers if that's what you want.\n\t\t\t\tminimumFractionDigits: 2, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n\t\t\t\tmaximumFractionDigits: 2, // (causes 2500.99 to be printed as $2,501)\n\t\t\t});\n\t\t\treturn formatter.format(amount);\n\t\t}  ,\n\t\tformatInt(amount) {\n\t\t\tconst formatter = new Intl.NumberFormat('en-US', {\n\n\n\t\t\t\t// These options are needed to round to whole numbers if that's what you want.\n\t\t\t\tminimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n\t\t\t\tmaximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n\t\t\t});\n\t\t\treturn formatter.format(amount);\n\t\t},\n\t\tformatCurrency(amount) {\n\t\t\tconst formatter = new Intl.NumberFormat('en-US', {\n\t\t\t\tstyle: 'currency',\n\t\t\t\tcurrency: 'USD',\n\n\t\t\t\t// These options are needed to round to whole numbers if that's what you want.\n\t\t\t\tminimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n\t\t\t\tmaximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n\t\t\t});\n\t\t\treturn formatter.format(amount);\n\t\t},\t\n\t\tstr_pad_left(string,pad,length) {\n\t\t\treturn (new Array(length+1).join(pad)+string).slice(-length);\n\t\t},\t\n\t\thighlightDaysSincePP(value, key , item) {\n\t\t\tif (item.daysSinceLastRace  > 180) return \"gt180\";\n\t\t\tif (item.daysSinceLastRace > 90) return \"gt90\";\n\t\t\tif (item.daysSinceLastRace > 45) return \"gt45\";\n\t\t},\t\n\t\thighlightFinish(value, key, item) {\n\t\t\tif (item.finishPosition == \"1\") return \"greenHighlight\";\n\t\t\tif (item.finishPosition == \"2\" || item.finishPosition == \"3\") return \"lightGreenHighlight\";\n\t\t},\t\n\t\thighlightBeatenFavorite(value,key,item) {\n\t\t\tif (item.favoriteFlag && item.finishPosition != \"1\") return \"yellowHighlight\";\n\t\t},\n\t\thighlightPurseShift(value,key,item) {\n\t\t\tif (item.purse >= this.race.purse + 20000 ) return \"greenHighlight\";\n\t\t\tif (item.purse > this.race.purse) return \"lightGreenHighlight\";\n\t\t\tif (item.purse == this.race.purse) return \"\";\n\t\t\tif (item.purse < this.race.purse - 10000) return \"yellowHighlight\";\n\t\t\tif (item.purse < this.race.purse - 20000) return \"lightRedHighlight\";\n\t\t\tif (item.purse < this.race.purse - 30000) return \"redHighlight\";\n\t\t},\n\t\thighlightSpeedInRange(value,key,item) {\n\t\t\tif (item.brisspeedRating >= this.race.parSpeed) return \"greenHighlight\";\n\t\t\tif (item.brisspeedRating >= this.race.parSpeed - 3) return \"lightGreenHighlight\";\n\t\t},\n        highlightRaceStrength(value,key,item) {\n            if (item.raceStrength >= this.race.parSpeed - 2) return \"greenHighlight\";\n        },\n        highlightPace(value,key,item) {\n            if (item.e1 >= (this.race.furlongs < 8 ? this.race.parPace2F : this.race.parPace4F) -2 \n                && item.e2 >= (this.race.furlongs < 8 ? this.race.parPace4F : this.race.parPace6F) -2 \n                && item.paceFigureLate >= this.race.parLatePace -2)\n                    return \"greenHighlight\"\n        },\n        highlightRaceShape(value, key, item) {\n            if (item.raceShapeFirstCall > 9 && item.raceShapeSecondCall > 9 &&\n                this.horse.runStyle == 'E') return 'yellowHighlight';\n            if (item.raceShapeFirstCall > 9 && item.raceShapeSecondCall > 9 &&\n                (this.horse.runStyle == 'P' || this.horse.runStyle == 'S')) return 'greenHighlight';\n            if (item.raceShapeFirstCall < -9 && item.raceShapeSecondCall < -9 &&\n                this.horse.runStyle == 'E') return 'greenHighlight';\n            if (item.raceShapeFirstCall < -9 && item.raceShapeSecondCall < -9 &&\n                (this.horse.runStyle == 'P' || this.horse.runStyle == 'S')) return 'yellowHighlight';                \n        },\n        highlightRaceShape2(value,key,item) {\n            switch (item.raceShape) {\n                case \"FF\":\n                    if ((!isNaN(item.finishPosition) && item.finishPosition <= 3) || item.finishBeatenLengthsOnly < 2) return \"greenHighlight\";\n                    return;\n                case \"SS\":\n                    return \"text-info strong\";\n                case \"SF\":\n                    if (item.finishPosition == \"1\" && (this.horse.runStyle == \"E\" || this.horse.runstyle == \"E/P\")) return \"yellowHighlight\";\n                    if (item.finishPosition == \"1\" && (this.horse.runStyle == \"P\" || this.horse.runstyle == \"S\")) return \"greenHighlight\"; \n                    return;\n                case \"FS\":\n                    if (item.finishPosition == \"1\" && (this.horse.runStyle == \"P\" || this.horse.runstyle == \"S\")) return \"yellowHighlight\"; \n                    return;\n            }\n        },\n        highlightFinalFraction(value,key,item) {\n            if (this.race.turfFlag && this.race.furlongs >= 8) {\n                var final;\n                var target;\n\n                // mile\n                if (\n                        Math.abs(item.furlongs) == 8 \n                        || (Math.abs(item.distance) >=1800 && Math.abs(item.distance) <= 1830)\n                        || Math.abs(item.furlongs) == 10\n                        || Math.abs(item.furlongs) == 12\n                        ) {\n                    final = item.split3;\n                    target = 23.5;\n                }  else if (\n                        Math.abs(item.furlongs) == 8.5\n                        ) {\n                    final = item.split3;\n                    target = 29.5;\n                } else if (\n                        Math.abs(item.furlongs) == 9\n                        || Math.abs(item.furlongs) == 9.5\n                        || Math.abs(item.furlongs) == 11\n                        ) {\n                    final = item.split2 + item.split3;\n                    target = 35.5;                   \n                }\n                if (item.raceType.substring(0,3) == \"MAID\") target += .4;\n                return (final < target ? \"greenHighlight\" : \"\");\n            }\n        },\n\t\thighlightShift(value) {\n\t\t\tif (value < 0) return \"greenHighlight\";\n\t\t\tif (value > 0) return \"yellowHighlight\";\n\t\t},\n\t\thighlightSimilarSurfDist(value, key, item) {\n\t\t\tif (this.race.surface.indexOf(\"TURF\") > -1 && !this.race.offTheTurfFlag) {\n\t\t\t\tif (\n\t\t\t\t\titem.surface.indexOf(\"TURF\") > -1 \n\t\t\t\t\t&& ((this.race.trackCondition == \"fm\" && item.trackCondition == \"fm\") || (this.race.trackCondition != \"fm\" && [\"tf\",\"gd\",\"gf\",\"hd\",\"yl\",\"sf\",\"hy\",\"sl\"].indexOf(item.trackCondition) > -1))\n\t\t\t\t\t&& ((this.race.furlongs < 8 && item.furlongs < 8) || (this.race.furlongs >= 8 && item.furlongs >= 8))) \n\t\t\t\t\treturn \"blueHighlight\";\n\t\t\t} else {\n\t\t\t\tif ((item.surface.indexOf(\"TURF\") == -1 || item.offTheTurfFlag)\n\t\t\t\t\t&& ((this.race.trackCondition == \"ft\" && item.trackCondition == \"ft\") || (this.race.trackCondition != \"ft\" && [\"gd\",\"hy\",\"my\",\"sl\",\"sy\",\"wf\"].indexOf(item.trackCondition) > -1))\n\t\t\t\t\t&& ((this.race.furlongs < 8 && item.furlongs < 8) || (this.race.furlongs >= 8 && item.furlongs >= 8))) \n\t\t\t\t\treturn \"blueHighlight\";\n\t\t\t}\n\t\t},\n\t\talsoInRace(nameToMatch, row) {\n\t\t\tvar names = _.pluck(this.race.horses, \"name\");\n\t\t\tif (names.indexOf(nameToMatch) > -1 && nameToMatch != row.name) return \"alsoInRace\";\n\n\t\t},\n        raceTypeCode(type) {\n            switch (type) {\n                case \"GRADE_1\": return \"G1\";\n                case \"GRADE_2\": return \"G2\";\n                case \"GRADE_3\": return \"G3\";\n                case \"NON_GRADED\": return \"N\";\n                case \"ALLOWANCE\": return \"A\";\n                case \"STARTER_ALLOWANCE\": return \"R\";\n                case \"STARTER_HANDICAP\": return \"T\";\n                case \"CLAIMING\": return \"C\";\n                case \"OPTIONAL_CLAIMING\": return \"CO\";\n                case \"MAIDEN_SPECIAL_WEIGHT\": return \"S\";\n                case \"MAIDEN_CLAIMING\": return \"M\";\n                case \"ALLOWANCE_OPTIONAL_CLAIMING\": return \"AO\";\n                case \"MAIDEN_OPTIONAL_CLAIMING\": return \"MO\";\n                case \"OPTIONAL_CLAIMING_STAKES\": return \"NO\";\n            }\n        }    \n    }\n}\n</script>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}