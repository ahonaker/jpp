{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { BIconPlus, BIconDash, BIconCashStack } from 'bootstrap-vue';\nimport HorseView from '@/components/HorseView';\nimport axios from 'axios';\nimport _ from 'underscore';\nexport default {\n  name: 'App',\n  components: {\n    HorseView,\n    BIconPlus,\n    BIconDash,\n    BIconCashStack\n  },\n  data() {\n    return {\n      races: [],\n      file: null,\n      options: {\n        surface: 'all',\n        distance: 'all',\n        condition: 'all'\n      },\n      trackConditions: [{\n        value: \"ft\",\n        text: \"Fast\"\n      }, {\n        value: \"my\",\n        text: \"Muddy\"\n      }, {\n        value: \"wf\",\n        text: \"Wet Fast\"\n      }, {\n        value: \"yl\",\n        text: \"Yielding\"\n      }, {\n        value: \"hy\",\n        text: \"Heavy\"\n      }, {\n        value: \"gd\",\n        text: \"Good\"\n      }, {\n        value: \"sy\",\n        text: \"Sloppy\"\n      }, {\n        value: \"fm\",\n        text: \"Firm\"\n      }, {\n        value: \"sf\",\n        text: \"Soft\"\n      }, {\n        value: \"sl\",\n        text: \"Slow\"\n      }],\n      surfaceOptions: [{\n        value: 'all',\n        text: 'All Surfaces'\n      }, {\n        value: 'same',\n        text: 'Same Surface Only'\n      }, {\n        value: 'off',\n        text: 'Off The Turf'\n      }],\n      distanceOptions: [{\n        value: 'all',\n        text: 'All Distances'\n      }, {\n        value: 'same',\n        text: 'Same Distance Only'\n      }, {\n        value: 'similar',\n        text: 'Similar Distances'\n      }],\n      conditionOptions: [{\n        value: 'all',\n        text: 'All Conditions'\n      }, {\n        value: 'good',\n        text: 'Good'\n      }, {\n        value: 'off',\n        text: 'Off'\n      }, {\n        value: \"my\",\n        text: \"Muddy\"\n      }, {\n        value: \"wf\",\n        text: \"Wet Fast\"\n      }, {\n        value: \"yl\",\n        text: \"Yielding\"\n      }, {\n        value: \"hy\",\n        text: \"Heavy\"\n      }, {\n        value: \"gd\",\n        text: \"Good\"\n      }, {\n        value: \"sy\",\n        text: \"Sloppy\"\n      }, {\n        value: \"sf\",\n        text: \"Soft\"\n      }, {\n        value: \"sl\",\n        text: \"Slow\"\n      }],\n      tmA: true,\n      tmAB: true,\n      tmB1: true,\n      tmB2: true,\n      tmC1: true,\n      tmAMultiplier: 1,\n      selectedWager: \"\",\n      combinations: [],\n      combinationsText: []\n    };\n  },\n  methods: {\n    async uploadAndCalculate() {\n      try {\n        var formData = new FormData();\n        formData.append(\"data\", this.file);\n        formData.append(\"filename\", this.file.name);\n        formData.append(\"distanceOption\", this.options.distance);\n        formData.append(\"surfaceOption\", this.options.surface);\n        formData.append(\"conditionOption\", this.options.condition);\n        const response = await axios({\n          url: 'uploadAndCalculate',\n          method: 'POST',\n          baseURL: 'http://localhost:8080/jpp/rest/remote/',\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          },\n          data: formData\n        });\n        //console.log(response);\n        this.races = response.data;\n        for (var i = 0; i < this.races.length; i++) {\n          this.combinations[i] = [];\n          this.combinationsText[i] = [];\n          for (var j = 0; j < this.races[i].multiRaceWagers.length; j++) {\n            this.combinations[i][j] = {\n              a: [],\n              b: [],\n              c: []\n            };\n            this.combinationsText[i][j] = {\n              tmA: \"\",\n              tmAB: \"\",\n              tmB1: \"\",\n              tmB2: \"\",\n              tmC1: \"\"\n            };\n          }\n        }\n      } catch (err) {\n        console.log(err.response);\n      }\n    },\n    async save() {\n      try {\n        await axios({\n          url: 'save',\n          method: 'GET',\n          baseURL: 'http://localhost:8080/jpp/rest/remote/'\n        });\n        this.$bvModal.msgBoxOk('Races saved.');\n      } catch (err) {\n        console.log(err.response);\n      }\n    },\n    retrieve() {\n      try {\n        this.$bvModal.msgBoxConfirm(\"Retrieve Saved Races?\").then(async confirmed => {\n          if (confirmed) {\n            const response = await axios({\n              url: 'retrieve',\n              method: 'GET',\n              baseURL: 'http://localhost:8080/jpp/rest/remote/'\n            });\n            this.races = response.data;\n          }\n        });\n      } catch (err) {\n        console.log(err.response);\n      }\n    },\n    async calculate() {\n      try {\n        const response = await axios({\n          url: 'calculate/' + this.options.distance + '/' + this.options.surface + '/' + this.options.condition,\n          method: 'GET',\n          baseURL: 'http://localhost:8080/jpp/rest/remote/'\n        });\n        this.races = response.data;\n      } catch (err) {\n        console.log(err.response);\n      }\n    },\n    async updateCondition(race) {\n      try {\n        const response = await axios({\n          url: 'setTrackCondition/' + race.raceNumber + '/' + race.trackCondition,\n          method: 'GET',\n          baseURL: 'http://localhost:8080/jpp/rest/remote/'\n        });\n        this.races = response.data;\n      } catch (err) {\n        console.log(err.response);\n      }\n    },\n    async toggleOffTheTurf(race) {\n      try {\n        const response = await axios({\n          url: 'toggleOffTheTurf/' + race.raceNumber,\n          method: 'GET',\n          baseURL: 'http://localhost:8080/jpp/rest/remote/'\n        });\n        this.races = response.data;\n      } catch (err) {\n        console.log(err.response);\n      }\n    },\n    reload() {\n      this.$bvModal.msgBoxConfirm(\"Reload and Start Over?\").then(confirmed => {\n        if (confirmed) {\n          this.uploadAndCalculate();\n        }\n      });\n    },\n    toggleAll(race, b) {\n      _.each(race.horses, async function (horse) {\n        try {\n          horse._showDetails = b;\n          await axios({\n            url: 'toggleShowDetail/' + race.raceNumber + '/' + horse.programNumber,\n            method: 'GET',\n            baseURL: 'http://localhost:8080/jpp/rest/remote/'\n          });\n        } catch (err) {\n          console.log(err);\n        }\n      });\n    },\n    formatCurrency(amount) {\n      const formatter = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD',\n        // These options are needed to round to whole numbers if that's what you want.\n        minimumFractionDigits: 0,\n        // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n        maximumFractionDigits: 0 // (causes 2500.99 to be printed as $2,501)\n      });\n\n      return formatter.format(amount);\n    },\n    formatCurrency2(amount) {\n      const formatter = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD'\n\n        // These options are needed to round to whole numbers if that's what you want.\n        //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n        //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n      });\n\n      return formatter.format(amount);\n    },\n    tmGenerate(results) {\n      for (var i = 0; i < this.races.length; i++) {\n        for (var j = 0; j < this.races[i].multiRaceWagers.length; j++) {\n          this.races[i].multiRaceWagers[j] = results[i][j];\n        }\n      }\n      this.races.splice();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0OA;AACA;AAEA;AACA;AAEA;EACAA;EACAC;IACAC;IAAAC;IAAAC;IAAAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC,kBACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAC,iBACA;QAAAF;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAE,kBACA;QAAAH;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAG,mBACA;QAAAJ;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAI;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACA;QACA;QACAC;QACAA;QACAA;QACAA;QACAA;QACA;UACAC;UACAC;UACAC;UACAC;YACA;UACA;UACA3B;QACA;QACA;QACA;QAEA;UACA;UACA;UACA;YACA;cAAA4B;cAAAC;cAAAC;YAAA;YACA;cAAAjB;cAAAC;cAAAC;cAAAC;cAAAC;YAAA;UACA;QACA;MACA;QACAc;MAEA;IACA;IACA;MACA;QACA;UACAP;UACAC;UACAC;QACA;QACA;MACA;QACAK;MAEA;IACA;IACAC;MACA;QACA,qDACAC;UACA;YACA;cACAT;cACAC;cACAC;YACA;YACA;UAEA;QACA;MACA;QACAK;MAEA;IACA;IACA;MACA;QACA;UACAP;UACAC;UACAC;QACA;QACA;MACA;QACAK;MAEA;IACA;IACA;MACA;QACA;UACAP;UACAC;UACAC;QACA;QACA;MACA;QACAK;MAEA;IACA;IACA;MACA;QACA;UACAP;UACAC;UACAC;QACA;QACA;MACA;QACAK;MAEA;IACA;IACAG;MACA,sDACAD;QACA;UACA;QACA;MACA;IACA;IACAE;MACAC;QACA;UACAC;UACA;YACAb;YACAC;YACAC;UACA;QACA;UACAK;QAEA;MACA;IACA;IACAO;MACA;QACAC;QACAC;QAEA;QACAC;QAAA;QACAC;MACA;;MACA;IACA;IACAC;MACA;QACAJ;QACAC;;QAEA;QACA;QACA;MACA;;MACA;IACA;IACAI;MACA;QACA;UACA;QACA;MACA;MACA;IACA;EACA;AACA","names":["name","components","HorseView","BIconPlus","BIconDash","BIconCashStack","data","races","file","options","surface","distance","condition","trackConditions","value","text","surfaceOptions","distanceOptions","conditionOptions","tmA","tmAB","tmB1","tmB2","tmC1","tmAMultiplier","selectedWager","combinations","combinationsText","methods","formData","url","method","baseURL","headers","a","b","c","console","retrieve","then","reload","toggleAll","_","horse","formatCurrency","style","currency","minimumFractionDigits","maximumFractionDigits","formatCurrency2","tmGenerate"],"sourceRoot":"src","sources":["App.vue"],"sourcesContent":["<template>\n\t<div id=\"app\">\n\t\t<b-container fluid>\n\n\t\t\t<b-navbar id=\"nav\" toggleable=\"sm\" class=\"py-2\" type=\"dark\" variant=\"primary\">\n\t\t\t\t\t\t\t\n\t\t\t\t<b-navbar-toggle target=\"nav-collapse\"></b-navbar-toggle>\n\t\t\t\t<b-collapse id=\"nav-collapse\" is-nav>\n\t\t\t\t\t<b-navbar-nav small>\n\t\t\t\t\t\t<b-nav-item class=\"h4\">JPP-UI</b-nav-item>\n\t\t\t\t\t</b-navbar-nav>\n\t\t\t\t</b-collapse>\n\t\t\t\t<!-- Right aligned nav items -->\n\t\t\t\t<b-navbar-nav>\n\t\t\t\t\t<b-nav-form>\n\t\t\t\t\t\t<b-form-file\n\t\t\t\t\t\t\tsize=\"sm\" \n\t\t\t\t\t\t\tv-model=\"file\"\n\t\t\t\t\t\t\t:state=\"Boolean(file)\"\n\t\t\t\t\t\t\tplaceholder=\"Choose or drop here...\"\n\t\t\t\t\t\t\tdrop-placeholder=\"Drop file here...\"\n\t\t\t\t\t\t\tclass=\"text-left\"\n\t\t\t\t\t\t></b-form-file>\n\t\t\t\t\t</b-nav-form>\n\t\t\t\t</b-navbar-nav>\t\t\t\t\n\t\t\t\t<b-navbar-nav class=\"\" small>\n\t\t\t\t\t<b-nav-item v-if=\"races.length == 0\" @click=\"uploadAndCalculate\">Load</b-nav-item>\n\t\t\t\t\t<b-nav-item v-else @click=\"reload\">Reload</b-nav-item>\n\t\t\t\t\t<b-nav-item @click=\"calculate\">Calculate</b-nav-item>\n\t\t\t\t\t<b-nav-item @click=\"save\">Save</b-nav-item>\t\t\t\n\t\t\t\t\t<b-nav-item @click=\"retrieve\">Retrieve</b-nav-item>\t\n\t\t\t\t</b-navbar-nav>\n\t\t\t</b-navbar>\n\n\t\t\t<b-tabs>\n\t\t\t\t<b-tab v-for=\"race in races\" :key=\"race.raceNumber\">\n\t\t\t\t\t<template #title>\n\t\t\t\t\t\tRace {{race.raceNumber}}&nbsp;\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<div class=\"card-body\">\n\t\t\t\t\t\t\t<h5 class=\"card-title\">\n\t\t\t\t\t\t\t\t<span>Race {{race.raceNumber}}</span>\n\t\t\t\t\t\t\t\t<small v-b-toggle=\"'collapse-'+race.race_id\"> - <u>show/hide details</u></small>\n\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t<b-collapse :id=\"'collapse-'+race.race_id\" visible>\n\t\t\t\t\t\t\t\t<b-row>\n\t\t\t\t\t\t\t\t\t<b-col v-b-tooltip.hover :title=\"race.raceConditions\" cols=\"5\">\n\t\t\t\t\t\t\t\t\t\t${{race.purse}} {{race.classification}}\n\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t<b-col cols=\"2\" class=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t{{race.surface}} <span v-if=\"race.distance<0\"><sup>*</sup></span>\n\t\t\t\t\t\t\t\t\t\t<span v-if=\"Math.abs(race.miles==1.5)\">1&frac12; Miles</span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"Math.abs(race.distance)==1800\">1<sup>40</sup> Miles</span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"Math.abs(race.distance)==1830\">1<sup>70</sup> Miles</span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"Math.abs(race.miles)==1.375\">1&frac38; Miles</span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"Math.abs(race.miles)==1.25\">1&frac14; Miles</span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"Math.abs(race.miles)==1.125\">1&frac18; Miles</span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"Math.abs(race.miles)==1.0625\">1<sup>1</sup>&frasl;<sub>16</sub> Mile</span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"Math.abs(race.miles)==1\">1 Mile</span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"Math.abs(race.furlongs)==4.5\">4&frac12; Furlongs</span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"Math.abs(race.furlongs)==5.5\">5&frac12; Furlongs</span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"Math.abs(race.furlongs)==6.5\">6&frac12; Furlongs</span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"Math.abs(race.furlongs)==7.5\">7&frac12; Furlongs</span>\n\t\t\t\t\t\t\t\t\t\t<span v-else>{{Math.abs(race.furlongs)}} Furlongs</span>\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t<b-col cols=\"5\" class=\"text-right\">\n\t\t\t\t\t\t\t\t\t\t<span v-if=\"race.sexRestriction == 'FILLIES_AND_MARES'\">Fillies & Mares </span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"race.sexRestriction == 'FILLIES'\">Fillies </span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"race.sexRestriction == 'COLTS_AND_GELDINGS'\">Colts & Geldings </span>\n\t\t\t\t\t\t\t\t\t\t<span v-if=\"race.ageRestriction == 'TWO_YEAR_OLDS'\">Two Year Olds </span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"race.ageRestriction == 'THREE_YEAR_OLDS'\">Three Year Olds </span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"race.ageRestriction == 'FOUR_YEAR_OLDS'\">Four Year Olds </span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"race.ageRestriction == 'FIVE_YEAR_OLDS'\">Five Year Olds </span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"race.ageRestriction == 'THREE_AND_FOUR_YEAR_OLDS'\">Three & Four Year Olds </span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"race.ageRestriction == 'FOUR_AND_FIVE_YEAR_OLDS'\">Four & Five Year Olds </span>\n\t\t\t\t\t\t\t\t\t\t<span v-else-if=\"race.ageRestriction == 'THREE_FOUR_AND_FIVE_YEAR_OLDS'\">Three, Four & Five Year Olds </span>\n\t\t\t\t\t\t\t\t\t\t<span v-if=\"race.ageRestrictionRange != 'ALL_AGES' && race.ageRestrictionRange == 'THAT_AGE_AND_UP'\">And Upward </span>\n\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t</b-row>\n\t\t\t\t\t\t\t\t<b-row>\n\t\t\t\t\t\t\t\t\t<b-col cols=\"12\">\n\t\t\t\t\t\t\t\t\t\t<span v-for=\"(note, index) in race.handicappingNotes\" :key=\"index\" class=\"text-info\">{{note}}<br></span>\n\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t</b-row>\n\t\t\t\t\t\t\t\t<b-row>\n\t\t\t\t\t\t\t\t\t<b-col cols=\"10\">\n\t\t\t\t\t\t\t\t\t\t{{race.wagerTypes}}\n\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t<b-col class=\"text-right\">\n\t\t\t\t\t\t\t\t\t\t{{race.postTimes}}\n\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t</b-row>\n\t\t\t\t\t\t\t</b-collapse>\n\t\t\t\t\t\t\t<b-row>\n\t\t\t\t\t\t\t\t<b-col cols=\"12\">\n\t\t\t\t\t\t\t\t\t<span v-for=\"(change, index) in race.changes\" :key=\"index\" class=\"text-danger\">\n\t\t\t\t\t\t\t\t\t\t<span v-if=\"change.indexOf('scratched') == -1\">{{change}}; </span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t</b-row>\n\t\t\t\t\t\t\t<b-row>\n\t\t\t\t\t\t\t\t<b-col class=\"text-left\">\n\t\t\t\t\t\t\t\t\tMaxSpeed: {{race.maxSpeed}}\n\t\t\t\t\t\t\t\t</b-col>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<b-col class=\"text-center\">\n\t\t\t\t\t\t\t\t\tMaxE1Avg: {{race.e1Avg}}\n\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t<b-col class=\"text-center\">\n\t\t\t\t\t\t\t\t\tMaxE2Avg: {{race.e2Avg}}\n\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t<b-col class=\"text-center\">\n\t\t\t\t\t\t\t\t\tMaxE2: {{race.maxE2}}\n\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t<b-col class=\"text-right\">\n\t\t\t\t\t\t\t\t\tLatePaceBestL3: {{race.latePaceBestLast3}}\n\t\t\t\t\t\t\t\t</b-col>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<b-col class=\"text-center\">\n\t\t\t\t\t\t\t\t\t{{race.paceScenario}}\n\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t<b-col cols=\"2\" class=\"text-right\">\n\t\t\t\t\t\t\t\t\tPars: {{race.furlongs &lt; 8 ? race.parPace2F : race.parPace4F}} {{race.furlongs &lt; 8 ? race.parPace4F : race.parPace6F}} / {{race.parLatePace}} - {{race.parSpeed}} \n\t\t\t\t\t\t\t\t</b-col>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</b-row>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<b-navbar id=\"nav\" class=\"py-2\" variant=\"success\" type=\"dark\">\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<!-- Right aligned nav items -->\n\t\t\t\t\t\t\t<b-navbar-nav>\n\t\t\t\t\t\t\t\t<b-nav-form>\n\t\t\t\t\t\t\t\t\t<b-form-select v-model=\"race.trackCondition\" :options=\"trackConditions\" @change=\"updateCondition(race)\"></b-form-select>\t\t\n\t\t\t\t\t\t\t\t\t<b-form-checkbox switch class=\"m-2\" v-if=\"race.surface.indexOf('TURF') > -1\" v-model=\"race.offTheTurfFlag\" @change=\"toggleOffTheTurf(race)\">Off</b-form-checkbox>\n\t\t\t\t\t\t\t\t\t<b-form-select class=\"m-2\" v-model=\"options.distance\" :options=\"distanceOptions\" @change=\"calculate\"></b-form-select>\n\t\t\t\t\t\t\t\t\t<b-form-select class=\"m-2\" v-model=\"options.surface\" :options=\"surfaceOptions\" @change=\"calculate\"></b-form-select>\n\t\t\t\t\t\t\t\t\t<b-form-select class=\"m-2\" v-model=\"options.condition\" :options=\"conditionOptions\" @change=\"calculate\"></b-form-select>\t\t\n\t\t\t\t\t\t\t\t</b-nav-form>\n\t\t\t\t\t\t\t</b-navbar-nav>\n\t\t\t\t\t\t\t<b-navbar-nav class=\"ml-auto\" small>\n\t\t\t\t\t\t\t\t<b-nav-item v-if=\"race.multiRaceWagers.length > 0\" v-b-toggle.ticketmaker><b-icon-cash-stack font-scale=\"2\"></b-icon-cash-stack></b-nav-item>\n\t\t\t\t\t\t\t\t<b-nav-item @click=\"toggleAll(race, true)\"><b-icon-plus font-scale=\"2\"></b-icon-plus></b-nav-item>\n\t\t\t\t\t\t\t\t<b-nav-item @click=\"toggleAll(race, false)\"><b-icon-dash font-scale=\"2\"></b-icon-dash></b-nav-item>\n\t\t\t\t\t\t\t</b-navbar-nav>\n\t\t\t\t\t\t</b-navbar>\t\t\n\n\t\t\t\t\t\t<b-collapse v-if=\"race.multiRaceWagers.length > 0\" id=\"ticketmaker\" class=\"mt-2\">\n\t\t\t\t\t\t\t<b-row>\n\t\t\t\t\t\t\t\t<b-col v-for=\"wager in race.multiRaceWagers\" :key=\"wager.name\">\n\t\t\t\t\t\t\t\t\t<b-row>\n\t\t\t\t\t\t\t\t\t\t<b-col cols=\"\" class=\"text-center\">\t\n\t\t\t\t\t\t\t\t\t\t\t<h6>{{wager.name}} ({{formatCurrency2(wager.min)}}) ({{wager.firstRace}}-{{wager.firstRace + wager.numRaces - 1}})</h6>\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t</b-row>\n\t\t\t\t\t\t\t\t\t<b-row class=\"my-2\">\n\t\t\t\t\t\t\t\t\t\t<b-col cols=\"3\">\n\t\t\t\t\t\t\t\t\t\t\tTotal\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t\t<b-col cols=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<strong>{{formatCurrency2(\n\t\t\t\t\t\t\t\t\t\t\t\t(tmA ? wager.tmACost : 0) +\n\t\t\t\t\t\t\t\t\t\t\t\t(tmAB ? wager.tmABCost : 0) +\n\t\t\t\t\t\t\t\t\t\t\t\t(tmB1 ? wager.tmB1Cost : 0) +\n\t\t\t\t\t\t\t\t\t\t\t\t(tmB2 ? wager.tmB2Cost : 0) +\n\t\t\t\t\t\t\t\t\t\t\t\t(tmC1 ? wager.tmC1Cost : 0)\n\t\t\t\t\t\t\t\t\t\t\t\t)}}</strong>\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t</b-row>\n\t\t\t\t\t\t\t\t\t<b-row class=\"my-2\">\n\t\t\t\t\t\t\t\t\t\t<b-col cols=\"3\">\n\t\t\t\t\t\t\t\t\t\t\t<b-form-checkbox v-model=\"tmA\">All As</b-form-checkbox>\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t\t<b-col cols=\"7\" >\n\t\t\t\t\t\t\t\t\t\t\t<strong>{{formatCurrency2(wager.tmACost)}}</strong>\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t\t<b-col>\n\t\t\t\t\t\t\t\t\t\t\t{{wager.tmA}}\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t</b-row>\n\t\t\t\t\t\t\t\t\t<b-row class=\"my-2\">\n\t\t\t\t\t\t\t\t\t\t<b-col cols=\"3\">\n\t\t\t\t\t\t\t\t\t\t\t<b-form-checkbox v-model=\"tmAB\">All As & Bs</b-form-checkbox>\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t\t<b-col cols=\"7\">\n\t\t\t\t\t\t\t\t\t\t\t<strong>{{formatCurrency2(wager.tmABCost)}}</strong>\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t\t<b-col>\n\t\t\t\t\t\t\t\t\t\t\t{{wager.tmAB}}\n\t\t\t\t\t\t\t\t\t\t</b-col>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</b-row>\n\t\t\t\t\t\t\t\t\t<b-row class=\"my-2\">\n\t\t\t\t\t\t\t\t\t\t<b-col cols=\"3\">\n\t\t\t\t\t\t\t\t\t\t\t<b-form-checkbox v-model=\"tmB1\">All As & One B</b-form-checkbox>\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t\t<b-col cols=\"7\">\n\t\t\t\t\t\t\t\t\t\t\t<strong>{{formatCurrency2(wager.tmB1Cost)}}</strong>\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t\t<b-col>\n\t\t\t\t\t\t\t\t\t\t\t<span v-for=\"(combo,n) in wager.tmB1\" :key=\"n\">{{combo}} <br></span>\n\t\t\t\t\t\t\t\t\t\t</b-col>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</b-row>\n\t\t\t\t\t\t\t\t\t<b-row class=\"my-2\">\n\t\t\t\t\t\t\t\t\t\t<b-col cols=\"3\">\n\t\t\t\t\t\t\t\t\t\t\t<b-form-checkbox v-model=\"tmB2\">All As & Two Bs</b-form-checkbox>\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t\t<b-col cols=\"7\">\n\t\t\t\t\t\t\t\t\t\t\t<strong>{{formatCurrency2(wager.tmB2Cost)}}</strong>\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t\t<b-col>\n\t\t\t\t\t\t\t\t\t\t\t<span v-for=\"(combo,n) in wager.tmB2\" :key=\"n\">{{combo}} <br></span>\n\t\t\t\t\t\t\t\t\t\t</b-col>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</b-row>\n\t\t\t\t\t\t\t\t\t<b-row class=\"my-2\">\n\t\t\t\t\t\t\t\t\t\t<b-col cols=\"3\">\n\t\t\t\t\t\t\t\t\t\t\t<b-form-checkbox v-model=\"tmC1\">All As & 1 C</b-form-checkbox>\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t\t<b-col cols=\"7\">\n\t\t\t\t\t\t\t\t\t\t\t<strong>{{formatCurrency2(wager.tmC1Cost)}}</strong>\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t\t<b-col>\n\t\t\t\t\t\t\t\t\t\t\t<span v-for=\"(combo,n) in wager.tmC1\" :key=\"n\">{{combo}} <br></span>\n\t\t\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t\t\t</b-row>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t</b-row>\n\t\t\t\t\t\t</b-collapse>\n\t\t\t\t\t<horse-view :race=\"race\" @selectionUpdate=\"tmGenerate\"></horse-view>\n\t\t\t\t</b-tab>\n\t\t\t</b-tabs>\n\n\t\t</b-container>\n\t</div>\n</template>\n\n<script>\nimport { BIconPlus, BIconDash, BIconCashStack } from 'bootstrap-vue'\nimport HorseView from '@/components/HorseView'\n\nimport axios from 'axios'\nimport _ from 'underscore'\n\nexport default {\n\tname: 'App',\n\tcomponents: {\n\t\tHorseView, BIconPlus, BIconDash, BIconCashStack\n\t},\n\tdata () {\n\t\treturn {\n\t\t\traces: [],\n\t\t\tfile: null,\n\t\t\toptions: {\n\t\t\t\tsurface: 'all',\n\t\t\t\tdistance: 'all',\n\t\t\t\tcondition: 'all'\n\t\t\t},\n\t\t\ttrackConditions: [\n\t\t\t\t{value: \"ft\", text: \"Fast\"},\n\t\t\t\t{value: \"my\", text: \"Muddy\"},\n\t\t\t\t{value: \"wf\", text: \"Wet Fast\"},\n\t\t\t\t{value: \"yl\", text: \"Yielding\"},\n\t\t\t\t{value: \"hy\", text: \"Heavy\"},\n\t\t\t\t{value: \"gd\", text: \"Good\"},\n\t\t\t\t{value: \"sy\", text: \"Sloppy\"},\n\t\t\t\t{value: \"fm\", text: \"Firm\"},\n\t\t\t\t{value: \"sf\", text: \"Soft\"},\n\t\t\t\t{value: \"sl\", text: \"Slow\"}\n\t\t\t],\n\t\t\tsurfaceOptions: [\n\t\t\t\t{value: 'all', text: 'All Surfaces'},\n\t\t\t\t{value: 'same', text: 'Same Surface Only'},\n\t\t\t\t{value: 'off', text: 'Off The Turf'}\n\t\t\t],\n\t\t\tdistanceOptions: [\n\t\t\t\t{value: 'all', text: 'All Distances'},\n\t\t\t\t{value: 'same', text: 'Same Distance Only'},\n\t\t\t\t{value: 'similar', text: 'Similar Distances'}\n\t\t\t],\n\t\t\tconditionOptions: [\n\t\t\t\t{value: 'all', text: 'All Conditions'},\n\t\t\t\t{value: 'good', text: 'Good'},\n\t\t\t\t{value: 'off', text: 'Off'},\n\t\t\t\t{value: \"my\", text: \"Muddy\"},\n\t\t\t\t{value: \"wf\", text: \"Wet Fast\"},\n\t\t\t\t{value: \"yl\", text: \"Yielding\"},\n\t\t\t\t{value: \"hy\", text: \"Heavy\"},\n\t\t\t\t{value: \"gd\", text: \"Good\"},\n\t\t\t\t{value: \"sy\", text: \"Sloppy\"},\n\t\t\t\t{value: \"sf\", text: \"Soft\"},\n\t\t\t\t{value: \"sl\", text: \"Slow\"}\n\t\t\t],\n\t\t\ttmA: true,\n\t\t\ttmAB: true,\n\t\t\ttmB1: true,\n\t\t\ttmB2: true,\n\t\t\ttmC1: true,\n\t\t\ttmAMultiplier: 1,\n\t\t\tselectedWager: \"\",\n\t\t\tcombinations: [],\n\t\t\tcombinationsText: []\n\t\t}\n\t},\n\tmethods: {\n\t\tasync uploadAndCalculate() {\n            try {\n                var formData = new FormData();\n                formData.append(\"data\", this.file);\n                formData.append(\"filename\", this.file.name);\n\t\t\t\tformData.append(\"distanceOption\", this.options.distance);\n\t\t\t\tformData.append(\"surfaceOption\", this.options.surface);\n\t\t\t\tformData.append(\"conditionOption\", this.options.condition);\n                const response = await axios({\n                    url: 'uploadAndCalculate',\n                    method: 'POST',\n                    baseURL: 'http://localhost:8080/jpp/rest/remote/',\n                    headers: {\n                        'Content-Type': 'multipart/form-data'\n                    },\n                    data: formData\n                });\n                //console.log(response);\n\t\t\t\tthis.races = response.data;\n\n\t\t\t\tfor (var i=0; i < this.races.length; i++) {\n\t\t\t\t\tthis.combinations[i] = [];\n\t\t\t\t\tthis.combinationsText[i] = []; \n\t\t\t\t\tfor (var j=0; j < this.races[i].multiRaceWagers.length; j++) {\n\t\t\t\t\t\tthis.combinations[i][j] = {a: [], b:[], c:[]};\n\t\t\t\t\t\tthis.combinationsText[i][j] = {tmA: \"\", tmAB: \"\", tmB1: \"\", tmB2: \"\", tmC1: \"\"};\n\t\t\t\t\t}\n\t\t\t\t}\n            } catch (err) {\n                console.log(err.response);\n                \n            }\n\t\t},\n\t\tasync save() {\n            try {\n                await axios({\n                    url: 'save', \n                    method: 'GET',\n                    baseURL: 'http://localhost:8080/jpp/rest/remote/'\n                });\n\t\t\t\tthis.$bvModal.msgBoxOk('Races saved.');\t\t\t\t\t\t\t\t\t\n            } catch (err) {\n                console.log(err.response);\n                \n            }\n\t\t},\n\t\tretrieve() {\n\t\t\ttry {\n\t\t\t\tthis.$bvModal.msgBoxConfirm(\"Retrieve Saved Races?\")\n\t\t\t\t\t.then(async confirmed => {\n\t\t\t\t\t\tif (confirmed) {\n\t\t\t\t\t\t\t\tconst response = await axios({\n\t\t\t\t\t\t\t\t\turl: 'retrieve',\n\t\t\t\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\t\t\t\tbaseURL: 'http://localhost:8080/jpp/rest/remote/'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthis.races = response.data;\n\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t});\t\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(err.response);\n\t\t\t\t\t\t\t\n\t\t\t}\t\n\t\t},\n\t\tasync calculate() {\n            try {\n                const response = await axios({\n                    url: 'calculate/' + this.options.distance + '/' + this.options.surface + '/' + this.options.condition,\n                    method: 'GET',\n                    baseURL: 'http://localhost:8080/jpp/rest/remote/'\n                });\n                this.races = response.data;\n            } catch (err) {\n                console.log(err.response);\n                \n            }\n\t\t},\t\t\t\n\t\tasync updateCondition(race) {\n            try {\n                const response = await axios({\n                    url: 'setTrackCondition/' + race.raceNumber + '/' + race.trackCondition,\n                    method: 'GET',\n                    baseURL: 'http://localhost:8080/jpp/rest/remote/'\n                });\n\t\t\t\tthis.races = response.data;\n            } catch (err) {\n                console.log(err.response);\n                \n            }\t\t\n\t\t},\n\t\tasync toggleOffTheTurf(race) {\n            try {\n                const response = await axios({\n                    url: 'toggleOffTheTurf/' + race.raceNumber,\n                    method: 'GET',\n                    baseURL: 'http://localhost:8080/jpp/rest/remote/'\n                });\n\t\t\t\tthis.races = response.data;\n            } catch (err) {\n                console.log(err.response);\n                \n            }\t\t\n\t\t},\n\t\treload() {\n\t\t\tthis.$bvModal.msgBoxConfirm(\"Reload and Start Over?\")\n\t\t\t\t.then(confirmed => {\n\t\t\t\t\tif (confirmed) {\n\t\t\t\t\t\tthis.uploadAndCalculate();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\ttoggleAll(race, b) {\n\t\t\t_.each(race.horses, async function(horse){\t\t\n\t\t\t\ttry {\n\t\t\t\t\thorse._showDetails = b;\n\t\t\t\t\tawait axios({\n\t\t\t\t\t\turl: 'toggleShowDetail/' + race.raceNumber + '/' + horse.programNumber,\n\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\tbaseURL: 'http://localhost:8080/jpp/rest/remote/'\n\t\t\t\t\t});\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\n\t\t\t\t}           \n\t\t\t});\n\t\t},\t\n\t\tformatCurrency(amount) {\n\t\t\tconst formatter = new Intl.NumberFormat('en-US', {\n\t\t\t\tstyle: 'currency',\n\t\t\t\tcurrency: 'USD',\n\n\t\t\t\t// These options are needed to round to whole numbers if that's what you want.\n\t\t\t\tminimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n\t\t\t\tmaximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n\t\t\t});\n\t\t\treturn formatter.format(amount);\n\t\t},\n\t\tformatCurrency2(amount) {\n\t\t\tconst formatter = new Intl.NumberFormat('en-US', {\n\t\t\t\tstyle: 'currency',\n\t\t\t\tcurrency: 'USD',\n\n\t\t\t\t// These options are needed to round to whole numbers if that's what you want.\n\t\t\t\t//minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n\t\t\t\t//maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n\t\t\t});\n\t\t\treturn formatter.format(amount);\n\t\t},\t\t\n\t\ttmGenerate (results) {\n\t\t\tfor (var i=0; i < this.races.length; i++) {\n\t\t\t\tfor (var j=0; j < this.races[i].multiRaceWagers.length; j++) {\n\t\t\t\t\tthis.races[i].multiRaceWagers[j] = results[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.races.splice();\n\t\t}\t\t\t\n\t}\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n}\n\n#nav {\n  padding: 30px;\n}\n\ntable#pps .flip-list-move {\n  transition: transform 1s;\n}\n\n#filenameform {\n\twidth: 400px;\n}\n.pp {\n\tfont-size: xx-small;\n}\n\n.diff365 {\n\tborder-top: solid orange;\n}\n\n.diff90 {\n\tborder-top: solid purple;\n}\n\n.workout {\n\twhite-space: pre;\n}\n\n.alsoInRace, .strong {\n\tfont-weight: bold;\n}\n\n.scratched, .ignored {\n\ttext-decoration: line-through;\n}\n\n.aHorse {\n\tborder-left: solid thick greenyellow;\n\tborder-right: solid thick greenyellow;\n}\n\n.bHorse {\n\tborder-left: solid thick cornflowerblue;\n\tborder-right: solid thick cornflowerblue;\n}\n\n.cHorse {\n\tborder-left: solid thick gold;\n\tborder-right: solid thick gold;\n}\n\n.greenHighlight {\n\tbackground-color: greenyellow;\n}\n\n.lightGreenHighlight {\n\tbackground-color: rgb(223, 249, 184);\n}\n\n.lightGreenHighlightBorder {\n\tborder-bottom: solid greenyellow;\n}\n\n.blueHighlightBorder {\n\tborder-bottom: solid lightblue;\n}\n\n.blueHighlight {\n\tbackground-color: lightblue;\n}\n\n.gt180, redHighlight {\n\tbackground-color: red;\n}\n\n.gt90, lightRedHighlight {\n\tbackground-color: rgb(231, 194, 194)\n}\n\n.gt45, .yellowHighlight  {\n\tbackground-color: yellow;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}